/*
 * jQuery FlexSlider v2.3.0-bleeding
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */
function onYouTubePlayerAPIReady(){mejs.YouTubeApi.iFrameReady()}function onYouTubePlayerReady(id){mejs.YouTubeApi.flashReady(id)}!function($){$.flexslider=function(el,options){var slider=$(el);slider.vars=$.extend({},$.flexslider.defaults,options);var watchedEventClearTimer,namespace=slider.vars.namespace,msGesture=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,touch=("ontouchstart"in window||msGesture||window.DocumentTouch&&document instanceof DocumentTouch)&&slider.vars.touch,eventType="click touchend MSPointerUp",watchedEvent="",vertical="vertical"===slider.vars.direction,reverse=slider.vars.reverse,carousel=slider.vars.itemWidth>0,fade="fade"===slider.vars.animation,asNav=""!==slider.vars.asNavFor,methods={},focused=!0;$.data(el,"flexslider",slider),methods={init:function(){slider.animating=!1,slider.currentSlide=parseInt(slider.vars.startAt?slider.vars.startAt:0,10),isNaN(slider.currentSlide)&&(slider.currentSlide=0),slider.animatingTo=slider.currentSlide,slider.atEnd=0===slider.currentSlide||slider.currentSlide===slider.last,slider.containerSelector=slider.vars.selector.substr(0,slider.vars.selector.search(" ")),slider.slides=$(slider.vars.selector,slider),slider.container=$(slider.containerSelector,slider),slider.count=slider.slides.length,slider.syncExists=$(slider.vars.sync).length>0,"slide"===slider.vars.animation&&(slider.vars.animation="swing"),slider.prop=vertical?"top":"marginLeft",slider.args={},slider.manualPause=!1,slider.stopped=!1,slider.started=!1,slider.startTimeout=null,slider.transitions=!slider.vars.video&&!fade&&slider.vars.useCSS&&function(){var obj=document.createElement("div"),props=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in props)if(void 0!==obj.style[props[i]])return slider.pfx=props[i].replace("Perspective","").toLowerCase(),slider.prop="-"+slider.pfx+"-transform",!0;return!1}(),""!==slider.vars.controlsContainer&&(slider.controlsContainer=$(slider.vars.controlsContainer).length>0&&$(slider.vars.controlsContainer)),""!==slider.vars.manualControls&&(slider.manualControls=$(slider.vars.manualControls).length>0&&$(slider.vars.manualControls)),slider.vars.randomize&&(slider.slides.sort(function(){return Math.round(Math.random())-.5}),slider.container.empty().append(slider.slides)),slider.doMath(),slider.setup("init"),slider.vars.controlNav&&methods.controlNav.setup(),slider.vars.directionNav&&methods.directionNav.setup(),slider.vars.keyboard&&(1===$(slider.containerSelector).length||slider.vars.multipleKeyboard)&&$(document).bind("keyup",function(event){var keycode=event.keyCode;if(!slider.animating&&(39===keycode||37===keycode)){var target=39===keycode?slider.getTarget("next"):37===keycode?slider.getTarget("prev"):!1;slider.flexAnimate(target,slider.vars.pauseOnAction)}}),slider.vars.mousewheel&&slider.bind("mousewheel",function(event,delta){event.preventDefault();var target=0>delta?slider.getTarget("next"):slider.getTarget("prev");slider.flexAnimate(target,slider.vars.pauseOnAction)}),slider.vars.pausePlay&&methods.pausePlay.setup(),slider.vars.slideshow&&slider.vars.pauseInvisible&&methods.pauseInvisible.init(),slider.vars.slideshow&&(slider.vars.pauseOnHover&&slider.hover(function(){slider.manualPlay||slider.manualPause||slider.pause()},function(){slider.manualPause||slider.manualPlay||slider.stopped||slider.play()}),slider.vars.pauseInvisible&&methods.pauseInvisible.isHidden()||(slider.vars.initDelay>0?slider.startTimeout=setTimeout(slider.play,slider.vars.initDelay):slider.play())),asNav&&methods.asNav.setup(),touch&&slider.vars.touch&&methods.touch(),(!fade||fade&&slider.vars.smoothHeight)&&$(window).bind("resize orientationchange focus",methods.resize),slider.find("img").attr("draggable","false"),setTimeout(function(){slider.vars.start(slider)},200)},asNav:{setup:function(){slider.asNav=!0,slider.animatingTo=Math.floor(slider.currentSlide/slider.move),slider.currentItem=slider.currentSlide,slider.slides.removeClass(namespace+"active-slide").eq(slider.currentItem).addClass(namespace+"active-slide"),msGesture?(el._slider=slider,slider.slides.each(function(){var that=this;that._gesture=new MSGesture,that._gesture.target=that,that.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),that.addEventListener("MSGestureTap",function(e){e.preventDefault();var $slide=$(this),target=$slide.index();$(slider.vars.asNavFor).data("flexslider").animating||$slide.hasClass("active")||(slider.direction=slider.currentItem<target?"next":"prev",slider.flexAnimate(target,slider.vars.pauseOnAction,!1,!0,!0))})})):slider.slides.on(eventType,function(e){e.preventDefault();var $slide=$(this),target=$slide.index(),posFromLeft=$slide.offset().left-$(slider).scrollLeft();0>=posFromLeft&&$slide.hasClass(namespace+"active-slide")?slider.flexAnimate(slider.getTarget("prev"),!0):$(slider.vars.asNavFor).data("flexslider").animating||$slide.hasClass(namespace+"active-slide")||(slider.direction=slider.currentItem<target?"next":"prev",slider.flexAnimate(target,slider.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){slider.manualControls?methods.controlNav.setupManual():methods.controlNav.setupPaging()},setupPaging:function(){var item,slide,type="thumbnails"===slider.vars.controlNav?"control-thumbs":"control-paging",j=1;if(slider.controlNavScaffold=$('<ol class="'+namespace+"control-nav "+namespace+type+'"></ol>'),slider.pagingCount>1)for(var i=0;i<slider.pagingCount;i++){if(slide=slider.slides.eq(i),item="thumbnails"===slider.vars.controlNav?'<img src="'+slide.attr("data-thumb")+'"/>':"<a>"+j+"</a>","thumbnails"===slider.vars.controlNav&&!0===slider.vars.thumbCaptions){var captn=slide.attr("data-thumbcaption");""!=captn&&void 0!=captn&&(item+='<span class="'+namespace+'caption">'+captn+"</span>")}slider.controlNavScaffold.append("<li>"+item+"</li>"),j++}slider.controlsContainer?$(slider.controlsContainer).append(slider.controlNavScaffold):slider.append(slider.controlNavScaffold),methods.controlNav.set(),methods.controlNav.active(),slider.controlNavScaffold.delegate("a, img",eventType,function(event){if(event.preventDefault(),""===watchedEvent||watchedEvent===event.type){var $this=$(this),target=slider.controlNav.index($this);$this.hasClass(namespace+"active")||(slider.direction=target>slider.currentSlide?"next":"prev",slider.flexAnimate(target,slider.vars.pauseOnAction))}""===watchedEvent&&(watchedEvent=event.type),methods.setToClearWatchedEvent()})},setupManual:function(){slider.controlNav=slider.manualControls,methods.controlNav.active(),slider.controlNav.bind(eventType,function(event){if(event.preventDefault(),""===watchedEvent||watchedEvent===event.type){var $this=$(this),target=slider.controlNav.index($this);$this.hasClass(namespace+"active")||(slider.direction=target>slider.currentSlide?"next":"prev",slider.flexAnimate(target,slider.vars.pauseOnAction))}""===watchedEvent&&(watchedEvent=event.type),methods.setToClearWatchedEvent()})},set:function(){var selector="thumbnails"===slider.vars.controlNav?"img":"a";slider.controlNav=$("."+namespace+"control-nav li "+selector,slider.controlsContainer?slider.controlsContainer:slider)},active:function(){slider.controlNav.removeClass(namespace+"active").eq(slider.animatingTo).addClass(namespace+"active")},update:function(action,pos){slider.pagingCount>1&&"add"===action?slider.controlNavScaffold.append($("<li><a>"+slider.count+"</a></li>")):1===slider.pagingCount?slider.controlNavScaffold.find("li").remove():slider.controlNav.eq(pos).closest("li").remove(),methods.controlNav.set(),slider.pagingCount>1&&slider.pagingCount!==slider.controlNav.length?slider.update(pos,action):methods.controlNav.active()}},directionNav:{setup:function(){var directionNavScaffold=$('<ul class="'+namespace+'direction-nav"><li><a class="'+namespace+'prev" href="#">'+slider.vars.prevText+'</a></li><li><a class="'+namespace+'next" href="#">'+slider.vars.nextText+"</a></li></ul>");slider.controlsContainer?($(slider.controlsContainer).append(directionNavScaffold),slider.directionNav=$("."+namespace+"direction-nav li a",slider.controlsContainer)):(slider.append(directionNavScaffold),slider.directionNav=$("."+namespace+"direction-nav li a",slider)),methods.directionNav.update(),slider.directionNav.bind(eventType,function(event){event.preventDefault();var target;(""===watchedEvent||watchedEvent===event.type)&&(target=$(this).hasClass(namespace+"next")?slider.getTarget("next"):slider.getTarget("prev"),slider.flexAnimate(target,slider.vars.pauseOnAction)),""===watchedEvent&&(watchedEvent=event.type),methods.setToClearWatchedEvent()})},update:function(){var disabledClass=namespace+"disabled";1===slider.pagingCount?slider.directionNav.addClass(disabledClass).attr("tabindex","-1"):slider.vars.animationLoop?slider.directionNav.removeClass(disabledClass).removeAttr("tabindex"):0===slider.animatingTo?slider.directionNav.removeClass(disabledClass).filter("."+namespace+"prev").addClass(disabledClass).attr("tabindex","-1"):slider.animatingTo===slider.last?slider.directionNav.removeClass(disabledClass).filter("."+namespace+"next").addClass(disabledClass).attr("tabindex","-1"):slider.directionNav.removeClass(disabledClass).removeAttr("tabindex")}},pausePlay:{setup:function(){var pausePlayScaffold=$('<div class="'+namespace+'pauseplay"><a></a></div>');slider.controlsContainer?(slider.controlsContainer.append(pausePlayScaffold),slider.pausePlay=$("."+namespace+"pauseplay a",slider.controlsContainer)):(slider.append(pausePlayScaffold),slider.pausePlay=$("."+namespace+"pauseplay a",slider)),methods.pausePlay.update(slider.vars.slideshow?namespace+"pause":namespace+"play"),slider.pausePlay.bind(eventType,function(event){event.preventDefault(),(""===watchedEvent||watchedEvent===event.type)&&($(this).hasClass(namespace+"pause")?(slider.manualPause=!0,slider.manualPlay=!1,slider.pause()):(slider.manualPause=!1,slider.manualPlay=!0,slider.play())),""===watchedEvent&&(watchedEvent=event.type),methods.setToClearWatchedEvent()})},update:function(state){"play"===state?slider.pausePlay.removeClass(namespace+"pause").addClass(namespace+"play").html(slider.vars.playText):slider.pausePlay.removeClass(namespace+"play").addClass(namespace+"pause").html(slider.vars.pauseText)}},touch:function(){function onTouchStart(e){slider.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(slider.pause(),cwidth=vertical?slider.h:slider.w,startT=Number(new Date),localX=e.touches[0].pageX,localY=e.touches[0].pageY,offset=carousel&&reverse&&slider.animatingTo===slider.last?0:carousel&&reverse?slider.limit-(slider.itemW+slider.vars.itemMargin)*slider.move*slider.animatingTo:carousel&&slider.currentSlide===slider.last?slider.limit:carousel?(slider.itemW+slider.vars.itemMargin)*slider.move*slider.currentSlide:reverse?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth,startX=vertical?localY:localX,startY=vertical?localX:localY,el.addEventListener("touchmove",onTouchMove,!1),el.addEventListener("touchend",onTouchEnd,!1))}function onTouchMove(e){localX=e.touches[0].pageX,localY=e.touches[0].pageY,dx=vertical?startX-localY:startX-localX,scrolling=vertical?Math.abs(dx)<Math.abs(localX-startY):Math.abs(dx)<Math.abs(localY-startY);var fxms=500;(!scrolling||Number(new Date)-startT>fxms)&&(e.preventDefault(),!fade&&slider.transitions&&(slider.vars.animationLoop||(dx/=0===slider.currentSlide&&0>dx||slider.currentSlide===slider.last&&dx>0?Math.abs(dx)/cwidth+2:1),slider.setProps(offset+dx,"setTouch")))}function onTouchEnd(){if(el.removeEventListener("touchmove",onTouchMove,!1),slider.animatingTo===slider.currentSlide&&!scrolling&&null!==dx){var updateDx=reverse?-dx:dx,target=updateDx>0?slider.getTarget("next"):slider.getTarget("prev");slider.canAdvance(target)&&(Number(new Date)-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)?slider.flexAnimate(target,slider.vars.pauseOnAction):fade||slider.flexAnimate(slider.currentSlide,slider.vars.pauseOnAction,!0)}el.removeEventListener("touchend",onTouchEnd,!1),startX=null,startY=null,dx=null,offset=null}function onMSPointerDown(e){e.stopPropagation(),slider.animating?e.preventDefault():(slider.pause(),el._gesture.addPointer(e.pointerId),accDx=0,cwidth=vertical?slider.h:slider.w,startT=Number(new Date),offset=carousel&&reverse&&slider.animatingTo===slider.last?0:carousel&&reverse?slider.limit-(slider.itemW+slider.vars.itemMargin)*slider.move*slider.animatingTo:carousel&&slider.currentSlide===slider.last?slider.limit:carousel?(slider.itemW+slider.vars.itemMargin)*slider.move*slider.currentSlide:reverse?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth)}function onMSGestureChange(e){e.stopPropagation();var slider=e.target._slider;if(slider){var transX=-e.translationX,transY=-e.translationY;return accDx+=vertical?transY:transX,dx=accDx,scrolling=vertical?Math.abs(accDx)<Math.abs(-transX):Math.abs(accDx)<Math.abs(-transY),e.detail===e.MSGESTURE_FLAG_INERTIA?(setImmediate(function(){el._gesture.stop()}),void 0):((!scrolling||Number(new Date)-startT>500)&&(e.preventDefault(),!fade&&slider.transitions&&(slider.vars.animationLoop||(dx=accDx/(0===slider.currentSlide&&0>accDx||slider.currentSlide===slider.last&&accDx>0?Math.abs(accDx)/cwidth+2:1)),slider.setProps(offset+dx,"setTouch"))),void 0)}}function onMSGestureEnd(e){e.stopPropagation();var slider=e.target._slider;if(slider){if(slider.animatingTo===slider.currentSlide&&!scrolling&&null!==dx){var updateDx=reverse?-dx:dx,target=updateDx>0?slider.getTarget("next"):slider.getTarget("prev");slider.canAdvance(target)&&(Number(new Date)-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)?slider.flexAnimate(target,slider.vars.pauseOnAction):fade||slider.flexAnimate(slider.currentSlide,slider.vars.pauseOnAction,!0)}startX=null,startY=null,dx=null,offset=null,accDx=0}}var startX,startY,offset,cwidth,dx,startT,scrolling=!1,localX=0,localY=0,accDx=0;msGesture?(el.style.msTouchAction="none",el._gesture=new MSGesture,el._gesture.target=el,el.addEventListener("MSPointerDown",onMSPointerDown,!1),el._slider=slider,el.addEventListener("MSGestureChange",onMSGestureChange,!1),el.addEventListener("MSGestureEnd",onMSGestureEnd,!1)):el.addEventListener("touchstart",onTouchStart,!1)},resize:function(){!slider.animating&&slider.is(":visible")&&(carousel||slider.doMath(),fade?methods.smoothHeight():carousel?(slider.slides.width(slider.computedW),slider.update(slider.pagingCount),slider.setProps()):vertical?(slider.viewport.height(slider.h),slider.setProps(slider.h,"setTotal")):(slider.vars.smoothHeight&&methods.smoothHeight(),slider.newSlides.width(slider.computedW),slider.setProps(slider.computedW,"setTotal")))},smoothHeight:function(dur){if(!vertical||fade){var $obj=fade?slider:slider.viewport;dur?$obj.animate({height:slider.slides.eq(slider.animatingTo).height()},dur):$obj.height(slider.slides.eq(slider.animatingTo).height())}},sync:function(action){var $obj=$(slider.vars.sync).data("flexslider"),target=slider.animatingTo;switch(action){case"animate":$obj.flexAnimate(target,slider.vars.pauseOnAction,!1,!0);break;case"play":$obj.playing||$obj.asNav||$obj.play();break;case"pause":$obj.pause()}},uniqueID:function($clone){return $clone.find("[id]").each(function(){var $this=$(this);$this.attr("id",$this.attr("id")+"_clone")}),$clone},pauseInvisible:{visProp:null,init:function(){var prefixes=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var i=0;i<prefixes.length;i++)prefixes[i]+"Hidden"in document&&(methods.pauseInvisible.visProp=prefixes[i]+"Hidden");if(methods.pauseInvisible.visProp){var evtname=methods.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(evtname,function(){methods.pauseInvisible.isHidden()?slider.startTimeout?clearTimeout(slider.startTimeout):slider.pause():slider.started?slider.play():slider.vars.initDelay>0?setTimeout(slider.play,slider.vars.initDelay):slider.play()})}},isHidden:function(){return document[methods.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(watchedEventClearTimer),watchedEventClearTimer=setTimeout(function(){watchedEvent=""},3e3)}},slider.flexAnimate=function(target,pause,override,withSync,fromNav){if(slider.vars.animationLoop||target===slider.currentSlide||(slider.direction=target>slider.currentSlide?"next":"prev"),asNav&&1===slider.pagingCount&&(slider.direction=slider.currentItem<target?"next":"prev"),!slider.animating&&(slider.canAdvance(target,fromNav)||override)&&slider.is(":visible")){if(asNav&&withSync){var master=$(slider.vars.asNavFor).data("flexslider");if(slider.atEnd=0===target||target===slider.count-1,master.flexAnimate(target,!0,!1,!0,fromNav),slider.direction=slider.currentItem<target?"next":"prev",master.direction=slider.direction,Math.ceil((target+1)/slider.visible)-1===slider.currentSlide||0===target)return slider.currentItem=target,slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide"),!1;slider.currentItem=target,slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide"),target=Math.floor(target/slider.visible)}if(slider.animating=!0,slider.animatingTo=target,pause&&slider.pause(),slider.vars.before(slider),slider.syncExists&&!fromNav&&methods.sync("animate"),slider.vars.controlNav&&methods.controlNav.active(),carousel||slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide"),slider.atEnd=0===target||target===slider.last,slider.vars.directionNav&&methods.directionNav.update(),target===slider.last&&(slider.vars.end(slider),slider.vars.animationLoop||slider.pause()),fade)touch?(slider.slides.eq(slider.currentSlide).css({opacity:0,zIndex:1}),slider.slides.eq(target).css({opacity:1,zIndex:2}),slider.wrapup(dimension)):(slider.slides.eq(slider.currentSlide).css({zIndex:1}).animate({opacity:0},slider.vars.animationSpeed,slider.vars.easing),slider.slides.eq(target).css({zIndex:2}).animate({opacity:1},slider.vars.animationSpeed,slider.vars.easing,slider.wrapup));else{var margin,slideString,calcNext,dimension=vertical?slider.slides.filter(":first").height():slider.computedW;carousel?(margin=slider.vars.itemMargin,calcNext=(slider.itemW+margin)*slider.move*slider.animatingTo,slideString=calcNext>slider.limit&&1!==slider.visible?slider.limit:calcNext):slideString=0===slider.currentSlide&&target===slider.count-1&&slider.vars.animationLoop&&"next"!==slider.direction?reverse?(slider.count+slider.cloneOffset)*dimension:0:slider.currentSlide===slider.last&&0===target&&slider.vars.animationLoop&&"prev"!==slider.direction?reverse?0:(slider.count+1)*dimension:reverse?(slider.count-1-target+slider.cloneOffset)*dimension:(target+slider.cloneOffset)*dimension,slider.setProps(slideString,"",slider.vars.animationSpeed),slider.transitions?(slider.vars.animationLoop&&slider.atEnd||(slider.animating=!1,slider.currentSlide=slider.animatingTo),slider.container.unbind("webkitTransitionEnd transitionend"),slider.container.bind("webkitTransitionEnd transitionend",function(){slider.wrapup(dimension)})):slider.container.animate(slider.args,slider.vars.animationSpeed,slider.vars.easing,function(){slider.wrapup(dimension)})}slider.vars.smoothHeight&&methods.smoothHeight(slider.vars.animationSpeed)}},slider.wrapup=function(dimension){fade||carousel||(0===slider.currentSlide&&slider.animatingTo===slider.last&&slider.vars.animationLoop?slider.setProps(dimension,"jumpEnd"):slider.currentSlide===slider.last&&0===slider.animatingTo&&slider.vars.animationLoop&&slider.setProps(dimension,"jumpStart")),slider.animating=!1,slider.currentSlide=slider.animatingTo,slider.vars.after(slider)},slider.animateSlides=function(){!slider.animating&&focused&&slider.flexAnimate(slider.getTarget("next"))},slider.pause=function(){clearInterval(slider.animatedSlides),slider.animatedSlides=null,slider.playing=!1,slider.vars.pausePlay&&methods.pausePlay.update("play"),slider.syncExists&&methods.sync("pause")},slider.play=function(){slider.playing&&clearInterval(slider.animatedSlides),slider.animatedSlides=slider.animatedSlides||setInterval(slider.animateSlides,slider.vars.slideshowSpeed),slider.started=slider.playing=!0,slider.vars.pausePlay&&methods.pausePlay.update("pause"),slider.syncExists&&methods.sync("play")},slider.stop=function(){slider.pause(),slider.stopped=!0},slider.canAdvance=function(target,fromNav){var last=asNav?slider.pagingCount-1:slider.last;return fromNav?!0:asNav&&slider.currentItem===slider.count-1&&0===target&&"prev"===slider.direction?!0:asNav&&0===slider.currentItem&&target===slider.pagingCount-1&&"next"!==slider.direction?!1:target!==slider.currentSlide||asNav?slider.vars.animationLoop?!0:slider.atEnd&&0===slider.currentSlide&&target===last&&"next"!==slider.direction?!1:slider.atEnd&&slider.currentSlide===last&&0===target&&"next"===slider.direction?!1:!0:!1},slider.getTarget=function(dir){return slider.direction=dir,"next"===dir?slider.currentSlide===slider.last?0:slider.currentSlide+1:0===slider.currentSlide?slider.last:slider.currentSlide-1},slider.setProps=function(pos,special,dur){var target=function(){var posCheck=pos?pos:(slider.itemW+slider.vars.itemMargin)*slider.move*slider.animatingTo,posCalc=function(){if(carousel)return"setTouch"===special?pos:reverse&&slider.animatingTo===slider.last?0:reverse?slider.limit-(slider.itemW+slider.vars.itemMargin)*slider.move*slider.animatingTo:slider.animatingTo===slider.last?slider.limit:posCheck;switch(special){case"setTotal":return reverse?(slider.count-1-slider.currentSlide+slider.cloneOffset)*pos:(slider.currentSlide+slider.cloneOffset)*pos;case"setTouch":return reverse?pos:pos;case"jumpEnd":return reverse?pos:slider.count*pos;case"jumpStart":return reverse?slider.count*pos:pos;default:return pos}}();return-1*posCalc+"px"}();slider.transitions&&(target=vertical?"translate3d(0,"+target+",0)":"translate3d("+target+",0,0)",dur=void 0!==dur?dur/1e3+"s":"0s",slider.container.css("-"+slider.pfx+"-transition-duration",dur),slider.container.css("transition-duration",dur)),slider.args[slider.prop]=target,(slider.transitions||void 0===dur)&&slider.container.css(slider.args),slider.container.css("transform",target)},slider.setup=function(type){if(fade)slider.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===type&&(touch?slider.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+slider.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(slider.currentSlide).css({opacity:1,zIndex:2}):slider.slides.css({opacity:0,display:"block",zIndex:1}).eq(slider.currentSlide).css({zIndex:2}).animate({opacity:1},slider.vars.animationSpeed,slider.vars.easing)),slider.vars.smoothHeight&&methods.smoothHeight();else{var sliderOffset,arr;"init"===type&&(slider.viewport=$('<div class="'+namespace+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(slider).append(slider.container),slider.cloneCount=0,slider.cloneOffset=0,reverse&&(arr=$.makeArray(slider.slides).reverse(),slider.slides=$(arr),slider.container.empty().append(slider.slides))),slider.vars.animationLoop&&!carousel&&(slider.cloneCount=2,slider.cloneOffset=1,"init"!==type&&slider.container.find(".clone").remove(),slider.container.append(slider.slides.first().clone().addClass("clone").attr("aria-hidden","true")).prepend(slider.slides.last().clone().addClass("clone").attr("aria-hidden","true")),methods.uniqueID(slider.slides.first().clone().addClass("clone")).appendTo(slider.container),methods.uniqueID(slider.slides.last().clone().addClass("clone")).prependTo(slider.container)),slider.newSlides=$(slider.vars.selector,slider),sliderOffset=reverse?slider.count-1-slider.currentSlide+slider.cloneOffset:slider.currentSlide+slider.cloneOffset,vertical&&!carousel?(slider.container.height(200*(slider.count+slider.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){slider.newSlides.css({display:"block"}),slider.doMath(),slider.viewport.height(slider.h),slider.setProps(sliderOffset*slider.h,"init")},"init"===type?100:0)):(slider.container.width(200*(slider.count+slider.cloneCount)+"%"),slider.setProps(sliderOffset*slider.computedW,"init"),setTimeout(function(){slider.doMath(),slider.newSlides.css({width:slider.computedW,"float":"left",display:"block"}),slider.vars.smoothHeight&&methods.smoothHeight()},"init"===type?100:0))}carousel||slider.slides.removeClass(namespace+"active-slide").eq(slider.currentSlide).addClass(namespace+"active-slide"),slider.vars.init(slider)},slider.doMath=function(){var slide=slider.slides.first(),slideMargin=slider.vars.itemMargin,minItems=slider.vars.minItems,maxItems=slider.vars.maxItems;slider.w=void 0===slider.viewport?slider.width():slider.viewport.width(),slider.h=slide.height(),slider.boxPadding=slide.outerWidth()-slide.width(),carousel?(slider.itemT=slider.vars.itemWidth+slideMargin,slider.minW=minItems?minItems*slider.itemT:slider.w,slider.maxW=maxItems?maxItems*slider.itemT-slideMargin:slider.w,slider.itemW=slider.minW>slider.w?(slider.w-slideMargin*(minItems-1))/minItems:slider.maxW<slider.w?(slider.w-slideMargin*(maxItems-1))/maxItems:slider.vars.itemWidth>slider.w?slider.w:slider.vars.itemWidth,slider.visible=Math.floor(slider.w/slider.itemW),slider.move=slider.vars.move>0&&slider.vars.move<slider.visible?slider.vars.move:slider.visible,slider.pagingCount=Math.ceil((slider.count-slider.visible)/slider.move+1),slider.last=slider.pagingCount-1,slider.limit=1===slider.pagingCount?0:slider.vars.itemWidth>slider.w?slider.itemW*(slider.count-1)+slideMargin*(slider.count-1):(slider.itemW+slideMargin)*slider.count-slider.w-slideMargin):(slider.itemW=slider.w,slider.pagingCount=slider.count,slider.last=slider.count-1),slider.computedW=slider.itemW-slider.boxPadding},slider.update=function(pos,action){slider.doMath(),carousel||(pos<slider.currentSlide?slider.currentSlide+=1:pos<=slider.currentSlide&&0!==pos&&(slider.currentSlide-=1),slider.animatingTo=slider.currentSlide),slider.vars.controlNav&&!slider.manualControls&&("add"===action&&!carousel||slider.pagingCount>slider.controlNav.length?methods.controlNav.update("add"):("remove"===action&&!carousel||slider.pagingCount<slider.controlNav.length)&&(carousel&&slider.currentSlide>slider.last&&(slider.currentSlide-=1,slider.animatingTo-=1),methods.controlNav.update("remove",slider.last))),slider.vars.directionNav&&methods.directionNav.update()},slider.addSlide=function(obj,pos){var $obj=$(obj);slider.count+=1,slider.last=slider.count-1,vertical&&reverse?void 0!==pos?slider.slides.eq(slider.count-pos).after($obj):slider.container.prepend($obj):void 0!==pos?slider.slides.eq(pos).before($obj):slider.container.append($obj),slider.update(pos,"add"),slider.slides=$(slider.vars.selector+":not(.clone)",slider),slider.setup(),slider.vars.added(slider)},slider.removeSlide=function(obj){var pos=isNaN(obj)?slider.slides.index($(obj)):obj;slider.count-=1,slider.last=slider.count-1,isNaN(obj)?$(obj,slider.slides).remove():vertical&&reverse?slider.slides.eq(slider.last).remove():slider.slides.eq(obj).remove(),slider.doMath(),slider.update(pos,"remove"),slider.slides=$(slider.vars.selector+":not(.clone)",slider),slider.setup(),slider.vars.removed(slider)},methods.init()},$(window).blur(function(){focused=!1}).focus(function(){focused=!0}),$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},$.fn.flexslider=function(options){if(void 0===options&&(options={}),"object"==typeof options)return this.each(function(){var $this=$(this),selector=options.selector?options.selector:".slides > li",$slides=$this.find(selector);1===$slides.length&&options.allowOneSlide===!0||0===$slides.length?($slides.fadeIn(400),options.start&&options.start($this)):void 0===$this.data("flexslider")&&new $.flexslider(this,options)});var $slider=$(this).data("flexslider");switch(options){case"play":$slider.play();break;case"pause":$slider.pause();break;case"stop":$slider.stop();break;case"next":$slider.flexAnimate($slider.getTarget("next"),!0);break;case"prev":case"previous":$slider.flexAnimate($slider.getTarget("prev"),!0);break;default:"number"==typeof options&&$slider.flexAnimate(options,!0)}}}(jQuery);/*!

 handlebars v1.1.2

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
var Handlebars=function(){var __module3__=function(){"use strict";function SafeString(string){this.string=string}var __exports__;return SafeString.prototype.toString=function(){return""+this.string},__exports__=SafeString}(),__module2__=function(__dependency1__){"use strict";function escapeChar(chr){return escape[chr]||"&amp;"}function extend(obj,value){for(var key in value)value.hasOwnProperty(key)&&(obj[key]=value[key])}function escapeExpression(string){return string instanceof SafeString?string.toString():string||0===string?(string=""+string,possible.test(string)?string.replace(badChars,escapeChar):string):""}function isEmpty(value){return value||0===value?isArray(value)&&0===value.length?!0:!1:!0}var __exports__={},SafeString=__dependency1__,escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return"function"==typeof value};isFunction(/x/)&&(isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)});var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&"object"==typeof value?"[object Array]"===toString.call(value):!1};return __exports__.isArray=isArray,__exports__.escapeExpression=escapeExpression,__exports__.isEmpty=isEmpty,__exports__}(__module3__),__module4__=function(){"use strict";function Exception(){for(var tmp=Error.prototype.constructor.apply(this,arguments),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]]}var __exports__,errorProps=["description","fileName","lineNumber","message","name","number","stack"];return Exception.prototype=new Error,__exports__=Exception}(),__module1__=function(__dependency1__,__dependency2__){"use strict";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{},this.partials=partials||{},registerDefaultHelpers(this)}function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(arg){if(2===arguments.length)return void 0;throw new Error("Missing helper: '"+arg+"'")}),instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;return isFunction(context)&&(context=context.call(this)),context===!0?fn(this):context===!1||null==context?inverse(this):isArray(context)?context.length>0?instance.helpers.each(context,options):inverse(this):fn(context)}),instance.registerHelper("each",function(context,options){var data,fn=options.fn,inverse=options.inverse,i=0,ret="";if(isFunction(context)&&(context=context.call(this)),options.data&&(data=createFrame(options.data)),context&&"object"==typeof context)if(isArray(context))for(var j=context.length;j>i;i++)data&&(data.index=i,data.first=0===i,data.last=i===context.length-1),ret+=fn(context[i],{data:data});else for(var key in context)context.hasOwnProperty(key)&&(data&&(data.key=key),ret+=fn(context[key],{data:data}),i++);return 0===i&&(ret=inverse(this)),ret}),instance.registerHelper("if",function(conditional,options){return isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}),instance.registerHelper("with",function(context,options){return isFunction(context)&&(context=context.call(this)),Utils.isEmpty(context)?void 0:options.fn(context)}),instance.registerHelper("log",function(context,options){var level=options.data&&null!=options.data.level?parseInt(options.data.level,10):1;instance.log(level,context)})}function log(level,obj){logger.log(level,obj)}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,VERSION="1.1.2";__exports__.VERSION=VERSION;var COMPILER_REVISION=4;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";__exports__.HandlebarsEnvironment=HandlebarsEnvironment,HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn)throw new Exception("Arg not supported with multiple helpers");Utils.extend(this.helpers,name)}else inverse&&(fn.not=inverse),this.helpers[name]=fn},registerPartial:function(name,str){toString.call(name)===objectType?Utils.extend(this.partials,name):this.partials[name]=str}};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];"undefined"!=typeof console&&console[method]&&console[method].call(console,obj)}}};__exports__.logger=logger,__exports__.log=log;var createFrame=function(object){var obj={};return Utils.extend(obj,object),obj};return __exports__.createFrame=createFrame,__exports__}(__module2__,__module4__),__module5__=function(__dependency1__,__dependency2__,__dependency3__){"use strict";function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(currentRevision>compilerRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){if(!env)throw new Error("No environment passed to template");var invokePartialWrapper;invokePartialWrapper=env.compile?function(partial,name,context,helpers,partials,data){var result=invokePartial.apply(this,arguments);if(result)return result;var options={helpers:helpers,partials:partials,data:data};return partials[name]=env.compile(partial,{data:void 0!==data},env),partials[name](context,options)}:function(partial,name){var result=invokePartial.apply(this,arguments);if(result)return result;throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")};var container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?programWrapper=program(i,fn,data):programWrapper||(programWrapper=this.programs[i]=program(i,fn)),programWrapper},merge:function(param,common){var ret=param||common;return param&&common&&param!==common&&(ret={},Utils.extend(ret,common),Utils.extend(ret,param)),ret},programWithDepth:programWithDepth,noop:noop,compilerInfo:null};return function(context,options){options=options||{};var helpers,partials,namespace=options.partial?options:env;options.partial||(helpers=options.helpers,partials=options.partials);var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);return options.partial||checkRevision(container.compilerInfo),result}}function programWithDepth(i,fn,data){var args=Array.prototype.slice.call(arguments,3),prog=function(context,options){return options=options||{},fn.apply(this,[context,options.data||data].concat(args))};return prog.program=i,prog.depth=args.length,prog}function program(i,fn,data){var prog=function(context,options){return options=options||{},fn(context,options.data||data)};return prog.program=i,prog.depth=0,prog}function invokePartial(partial,name,context,helpers,partials,data){var options={partial:!0,helpers:helpers,partials:partials,data:data};if(void 0===partial)throw new Exception("The partial "+name+" could not be found");return partial instanceof Function?partial(context,options):void 0}function noop(){return""}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,COMPILER_REVISION=__dependency3__.COMPILER_REVISION,REVISION_CHANGES=__dependency3__.REVISION_CHANGES;return __exports__.template=template,__exports__.programWithDepth=programWithDepth,__exports__.program=program,__exports__.invokePartial=invokePartial,__exports__.noop=noop,__exports__}(__module2__,__module4__,__module1__),__module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__,base=__dependency1__,SafeString=__dependency2__,Exception=__dependency3__,Utils=__dependency4__,runtime=__dependency5__,create=function(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=SafeString,hb.Exception=Exception,hb.Utils=Utils,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb},Handlebars=create();return Handlebars.create=create,__exports__=Handlebars}(__module1__,__module3__,__module4__,__module2__,__module5__);return __module0__}();(function(){function baseIndexOf(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1}function compareAscending(a,b){for(var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;++index<length;){var value=ac[index],other=bc[index];if(value!==other){if(value>other||"undefined"==typeof value)return 1;if(other>value||"undefined"==typeof other)return-1}}return a.index-b.index}function escapeStringChar(match){return"\\"+stringEscapes[match]}function slice(array,start,end){start||(start=0),"undefined"==typeof end&&(end=array?array.length:0);for(var index=-1,length=end-start||0,result=Array(0>length?0:length);++index<length;)result[index]=array[start+index];return result}function lodash(value){return value instanceof lodash?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll,this.__wrapped__=value}function baseBind(bindData){function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];return bound}function baseCreate(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function baseCreateCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if("undefined"==typeof thisArg||!("prototype"in func))return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if((partialRightArgs||isCurry)&&(args||(args=slice(arguments)),partialRightArgs&&push.apply(args,partialRightArgs),isCurry&&args.length<arity))return bitmask|=16,baseCreateWrapper([func,isCurryBound?bitmask:-4&bitmask,args,null,thisArg,arity]);if(args||(args=arguments),isBindKey&&(func=thisBinding[key]),this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5],isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isCurryBound=8&bitmask,key=func;return bound}function baseDifference(array,values){for(var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];++index<length;){var value=array[index];indexOf(values,value)<0&&result.push(value)}return result}function baseFlatten(array,isShallow,isStrict,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];if(value&&"object"==typeof value&&"number"==typeof value.length&&(isArray(value)||isArguments(value))){isShallow||(value=baseFlatten(value,isShallow,isStrict));var valIndex=-1,valLength=value.length,resIndex=result.length;for(result.length+=valLength;++valIndex<valLength;)result[resIndex++]=value[valIndex]}else isStrict||result.push(value)}return result}function baseIsEqual(a,b,stackA,stackB){if(a===b)return 0!==a||1/a==1/b;var type=typeof a,otherType=typeof b;if(!(a!==a||a&&objectTypes[type]||b&&objectTypes[otherType]))return!1;if(null==a||null==b)return a===b;var className=toString.call(a),otherClass=toString.call(b);if(className!=otherClass)return!1;switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=a instanceof lodash,bWrapped=b instanceof lodash;if(aWrapped||bWrapped)return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,stackA,stackB);if(className!=objectClass)return!1;var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&"constructor"in a&&"constructor"in b)return!1}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==a)return stackB[length]==b;var result=!0,size=0;if(stackA.push(a),stackB.push(b),isArr){if(size=b.length,result=size==a.length)for(;size--&&(result=baseIsEqual(a[size],b[size],stackA,stackB)););}else forIn(b,function(value,key,b){return hasOwnProperty.call(b,key)?(size++,!(result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,stackA,stackB))&&indicatorObject):void 0}),result&&forIn(a,function(value,key,a){return hasOwnProperty.call(a,key)?!(result=--size>-1)&&indicatorObject:void 0});return stackA.pop(),stackB.pop(),result}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){for(var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],seen=callback?[]:result;++index<length;){var value=array[index],computed=callback?callback(value,index,array):value;(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)&&(callback&&seen.push(computed),result.push(value))}return result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}else forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)});return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBindKey=2&bitmask,isPartial=16&bitmask,isPartialRight=32&bitmask;if(!isBindKey&&!isFunction(func))throw new TypeError;isPartial&&!partialArgs.length&&(bitmask&=-17,isPartial=partialArgs=!1),isPartialRight&&!partialRightArgs.length&&(bitmask&=-33,isPartialRight=partialRightArgs=!1);var creater=1==bitmask||17===bitmask?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return"function"==typeof value&&reNative.test(value)}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==argsClass||!1}function assign(object){if(!object)return object;for(var argsIndex=1,argsLength=arguments.length;argsLength>argsIndex;argsIndex++){var iterable=arguments[argsIndex];if(iterable)for(var key in iterable)object[key]=iterable[key]}return object}function clone(value){return isObject(value)?isArray(value)?slice(value):assign({},value):value}function defaults(object){if(!object)return object;for(var argsIndex=1,argsLength=arguments.length;argsLength>argsIndex;argsIndex++){var iterable=arguments[argsIndex];if(iterable)for(var key in iterable)"undefined"==typeof object[key]&&(object[key]=iterable[key])}return object}function functions(object){var result=[];return forIn(object,function(value,key){isFunction(value)&&result.push(key)}),result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object){for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===!0||value===!1||value&&"object"==typeof value&&toString.call(value)==boolClass||!1}function isDate(value){return value&&"object"==typeof value&&toString.call(value)==dateClass||!1}function isElement(value){return value&&1===value.nodeType||!1}function isEmpty(value){if(!value)return!0;if(isArray(value)||isString(value))return!value.length;for(var key in value)if(hasOwnProperty.call(value,key))return!1;return!0}function isEqual(a,b){return baseIsEqual(a,b)}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return"function"==typeof value}function isObject(value){return!(!value||!objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||value&&"object"==typeof value&&toString.call(value)==numberClass||!1}function isRegExp(value){return value&&objectTypes[typeof value]&&toString.call(value)==regexpClass||!1}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&toString.call(value)==stringClass||!1}function isUndefined(value){return"undefined"==typeof value}function omit(object){var props=[];forIn(object,function(value,key){props.push(key)}),props=baseDifference(props,baseFlatten(arguments,!0,!1,1));for(var index=-1,length=props.length,result={};++index<length;){var key=props[index];result[key]=object[key]}return result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object){for(var index=-1,props=baseFlatten(arguments,!0,!1,1),length=props.length,result={};++index<length;){var key=props[index];key in object&&(result[key]=object[key])}return result}function values(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function contains(collection,target){var indexOf=getIndexOf(),length=collection?collection.length:0,result=!1;return length&&"number"==typeof length?result=indexOf(collection,target)>-1:forOwn(collection,function(value){return(result=value===target)&&indicatorObject}),result}function every(collection,callback,thisArg){var result=!0;callback=createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&(result=!!callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return!(result=!!callback(value,index,collection))&&indicatorObject});return result}function filter(collection,callback,thisArg){var result=[];callback=createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];callback(value,index,collection)&&result.push(value)}else forOwn(collection,function(value,index,collection){callback(value,index,collection)&&result.push(value)});return result}function find(collection,callback,thisArg){callback=createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"!=typeof length){var result;return forOwn(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,indicatorObject):void 0}),result}for(;++index<length;){var value=collection[index];if(callback(value,index,collection))return value}}function findWhere(object,properties){return where(object,properties,!0)}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;++index<length&&callback(collection[index],index,collection)!==indicatorObject;);else forOwn(collection,callback)}function forEachRight(collection,callback){var length=collection?collection.length:0;if("number"==typeof length)for(;length--&&callback(collection[length],length,collection)!==!1;);else{var props=keys(collection);length=props.length,forOwn(collection,function(value,key,collection){return key=props?props[--length]:--length,callback(collection[key],key,collection)===!1&&indicatorObject})}}function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)}),result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=createCallback(callback,thisArg,3),"number"==typeof length)for(var result=Array(length);++index<length;)result[index]=callback(collection[index],index,collection);else result=[],forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)});return result}function max(collection,callback,thisArg){var computed=-1/0,result=computed;"function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null);var index=-1,length=collection?collection.length:0;if(null==callback&&"number"==typeof length)for(;++index<length;){var value=collection[index];value>result&&(result=value)}else callback=createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);current>computed&&(computed=current,result=value)});return result}function min(collection,callback,thisArg){var computed=1/0,result=computed;"function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null);var index=-1,length=collection?collection.length:0;if(null==callback&&"number"==typeof length)for(;++index<length;){var value=collection[index];result>value&&(result=value)}else callback=createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);computed>current&&(computed=current,result=value)});return result}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=createCallback(callback,thisArg,4);var index=-1,length=collection.length;if("number"==typeof length)for(noaccum&&(accumulator=collection[++index]);++index<length;)accumulator=callback(accumulator,collection[index],index,collection);else forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)});return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;return callback=createCallback(callback,thisArg,4),forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)}),accumulator}function reject(collection,callback,thisArg){return callback=createCallback(callback,thisArg,3),filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&"number"!=typeof collection.length&&(collection=values(collection)),null==n||guard)return collection?collection[baseRandom(0,collection.length-1)]:undefined;var result=shuffle(collection);return result.length=nativeMin(nativeMax(0,n),result.length),result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand],result[rand]=value}),result}function size(collection){var length=collection?collection.length:0;return"number"==typeof length?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&!(result=callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return(result=callback(value,index,collection))&&indicatorObject});return!!result}function sortBy(collection,callback,thisArg){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);for(callback=createCallback(callback,thisArg,3),forEach(collection,function(value,key,collection){result[++index]={criteria:[callback(value,key,collection)],index:index,value:value}}),length=result.length,result.sort(compareAscending);length--;)result[length]=result[length].value;return result}function toArray(collection){return isArray(collection)?slice(collection):collection&&"number"==typeof collection.length?map(collection):values(collection)}function where(collection,properties,first){return first&&isEmpty(properties)?undefined:(first?find:filter)(collection,properties)}function compact(array){for(var index=-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];value&&result.push(value)}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,!0,!0,1))}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=-1;for(callback=createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[0]:undefined;return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow){return baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if("number"==typeof fromIndex){var length=array?array.length:0;fromIndex=0>fromIndex?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:callback||n;return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length;++argsIndex<argsLength;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&args.push(value)}var array=args[0],index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];outer:for(;++index<length;)if(value=array[index],indexOf(result,value)<0){for(var argsIndex=argsLength;--argsIndex;)if(indexOf(args[argsIndex],value)<0)continue outer;result.push(value)}return result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[length-1]:undefined;return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;for("number"==typeof fromIndex&&(index=(0>fromIndex?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1);index--;)if(array[index]===value)return index;return-1}function range(start,end,step){start=+start||0,step=+step||1,null==end&&(end=start,start=0);for(var index=-1,length=nativeMax(0,ceil((end-start)/step)),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function rest(array,callback,thisArg){if("number"!=typeof callback&&null!=callback){var n=0,index=-1,length=array?array.length:0;for(callback=createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:nativeMax(0,callback);return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;for(callback=callback?createCallback(callback,thisArg,1):identity,value=callback(value);high>low;){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,!0,!0))}function uniq(array,isSorted,callback,thisArg){return"boolean"!=typeof isSorted&&null!=isSorted&&(thisArg=callback,callback="function"!=typeof isSorted&&thisArg&&thisArg[isSorted]===array?null:isSorted,isSorted=!1),null!=callback&&(callback=createCallback(callback,thisArg,3)),baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function zip(){for(var index=-1,length=max(pluck(arguments,"length")),result=Array(0>length?0:length);++index<length;)result[index]=pluck(arguments,index);return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};for(values||!length||isArray(keys[0])||(values=[]);++index<length;){var key=keys[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function after(n,func){if(!isFunction(func))throw new TypeError;return function(){return--n<1?func.apply(this,arguments):void 0}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){for(var funcs=arguments.length>1?baseFlatten(arguments,!0,!1,1):functions(object),index=-1,length=funcs.length;++index<length;){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function compose(){for(var funcs=arguments,length=funcs.length;length--;)if(!isFunction(funcs[length]))throw new TypeError;return function(){for(var args=arguments,length=funcs.length;length--;)args=[funcs[length].apply(this,args)];return args[0]}}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if(!isFunction(func))throw new TypeError;if(wait=nativeMax(0,wait)||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0),trailing="trailing"in options?options.trailing:trailing);var delayed=function(){var remaining=wait-(now()-stamp);if(0>=remaining){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)},maxDelayed=function(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))};return function(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result
}}function defer(func){if(!isFunction(func))throw new TypeError;var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func))throw new TypeError;var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){var cache={};return function(){var key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)}}function once(func){var ran,result;if(!isFunction(func))throw new TypeError;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),func=null,result)}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function throttle(func,wait,options){var leading=!0,trailing=!0;if(!isFunction(func))throw new TypeError;return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?options.leading:leading,trailing="trailing"in options?options.trailing:trailing),options={},options.leading=leading,options.maxWait=wait,options.trailing=trailing,debounce(func,wait,options)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function createCallback(func,thisArg,argCount){var type=typeof func;if(null==func||"function"==type)return baseCreateCallback(func,thisArg,argCount);if("object"!=type)return property(func);var props=keys(func);return function(object){for(var length=props.length,result=!1;length--&&(result=object[props[length]]===func[props[length]]););return result}}function escape(string){return null==string?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object){forEach(functions(object),function(methodName){var func=lodash[methodName]=object[methodName];lodash.prototype[methodName]=function(){var args=[this.__wrapped__];push.apply(args,arguments);var result=func.apply(lodash,args);return this.__chain__?new lodashWrapper(result,!0):result}})}function noConflict(){return root._=oldDash,this}function property(key){return function(object){return object[key]}}function random(min,max){return null==min&&null==max&&(max=1),min=+min||0,null==max?(max=min,min=0):max=+max||0,min+floor(nativeRandom()*(max-min+1))}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var _=lodash,settings=_.templateSettings;text=String(text||""),options=defaults({},options,settings);var index=0,source="__p += '",variable=options.variable,reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+(options.interpolate||reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,evaluateValue,offset){return source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(source+="' +\n_.escape("+escapeValue+") +\n'"),evaluateValue&&(source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n",variable||(variable="obj",source="with ("+variable+" || {}) {\n"+source+"\n}\n"),source="function("+variable+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+source+"return __p\n}";try{var result=Function("_","return "+source)(_)}catch(e){throw e.source=source,e}return data?result(data):(result.source=source,result)}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);for(callback=baseCreateCallback(callback,thisArg,1);++index<n;)result[index]=callback(index);return result}function unescape(string){return null==string?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter+"";return prefix?prefix+id:id}function chain(value){return value=new lodashWrapper(value),value.__chain__=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this.__chain__=!0,this}function wrapperValueOf(){return this.__wrapped__}var undefined,idCounter=0,indicatorObject={},keyPrefix=+new Date+"",reInterpolate=/<%=([\s\S]+?)%>/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]",objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var arrayRef=[],objectProto=Object.prototype,oldDash=root._,toString=objectProto.toString,reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ceil=Math.ceil,floor=Math.floor,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=root.isFinite,nativeIsNaN=root.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeRandom=Math.random;lodashWrapper.prototype=lodash.prototype;var support={};!function(){var object={0:1,length:1};support.spliceObjects=(arrayRef.splice.call(object,0,1),!object[0])}(1),lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:""},nativeCreate||(baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||root.Object()}}()),isArguments(arguments)||(isArguments=function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")||!1});var isArray=nativeIsArray||function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==arrayClass||!1},shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable)hasOwnProperty.call(iterable,index)&&result.push(index);return result},keys=nativeKeys?function(object){return isObject(object)?nativeKeys(object):[]}:shimKeys,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},htmlUnescapes=invert(htmlEscapes),reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g"),forIn=function(collection,callback){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;for(index in iterable)if(callback(iterable[index],index,collection)===indicatorObject)return result;return result},forOwn=function(collection,callback){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;for(index in iterable)if(hasOwnProperty.call(iterable,index)&&callback(iterable[index],index,collection)===indicatorObject)return result;return result};isFunction(/x/)&&(isFunction=function(value){return"function"==typeof value&&toString.call(value)==funcClass});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1}),groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)}),indexBy=createAggregator(function(result,value,key){result[key]=value}),pluck=map,now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()};lodash.after=after,lodash.bind=bind,lodash.bindAll=bindAll,lodash.chain=chain,lodash.compact=compact,lodash.compose=compose,lodash.countBy=countBy,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.filter=filter,lodash.flatten=flatten,lodash.forEach=forEach,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.map=map,lodash.max=max,lodash.memoize=memoize,lodash.min=min,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.pick=pick,lodash.pluck=pluck,lodash.range=range,lodash.reject=reject,lodash.rest=rest,lodash.shuffle=shuffle,lodash.sortBy=sortBy,lodash.tap=tap,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.union=union,lodash.uniq=uniq,lodash.values=values,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.zip=zip,lodash.collect=map,lodash.drop=rest,lodash.each=forEach,lodash.extend=assign,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,lodash.clone=clone,lodash.contains=contains,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.lastIndexOf=lastIndexOf,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.result=result,lodash.size=size,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.template=template,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.all=every,lodash.any=some,lodash.detect=find,lodash.findWhere=findWhere,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.include=contains,lodash.inject=reduce,lodash.first=first,lodash.last=last,lodash.sample=sample,lodash.take=first,lodash.head=first,mixin(lodash),lodash.VERSION="2.4.1",lodash.prototype.chain=wrapperChain,lodash.prototype.value=wrapperValueOf,forEach(["pop","push","reverse","shift","sort","splice","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var value=this.__wrapped__;return func.apply(value,arguments),support.spliceObjects||0!==value.length||delete value[0],this}}),forEach(["concat","join","slice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var value=this.__wrapped__,result=func.apply(value,arguments);return this.__chain__&&(result=new lodashWrapper(result),result.__chain__=!0),result}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=lodash,define(function(){return lodash})):freeExports&&freeModule?moduleExports?(freeModule.exports=lodash)._=lodash:freeExports._=lodash:root._=lodash}).call(this),function(){{var Backbone,root=this,previousBackbone=root.Backbone,array=[],slice=(array.push,array.slice);array.splice}Backbone="undefined"!=typeof exports?exports:root.Backbone={},Backbone.VERSION="1.1.0";var _=root._;_||"undefined"==typeof require||(_=require("underscore")),Backbone.$=root.jQuery||root.Zepto||root.ender||root.$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events={},this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;callback||"object"!=typeof name||(callback=this),obj&&((listeningTo={})[obj._listenId]=obj);for(var id in listeningTo)obj=listeningTo[id],obj.off(name,callback,this),(remove||_.isEmpty(obj._events))&&delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args)}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={}),id=obj._listenId||(obj._listenId=_.uniqueId("l"));return listeningTo[id]=obj,callback||"object"!=typeof name||(callback=this),obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection&&(this.collection=options.collection),options.parse&&(attrs=this.parse(attrs,options)||{}),attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]);for(attr in attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=!0);for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){return model.set(model.parse(resp,options),options)?(success&&success(model,resp,options),model.trigger("sync",model,resp,options),void 0):!1},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);return options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options)?!1:(success&&success(model,resp,options),model.trigger("sync",model,resp,options),void 0)},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base+("/"===base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return error?(this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1):!0}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models),options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++)model=models[i]=this.get(models[i]),model&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model));return singular?models[0]:models},set:function(models,options){options=_.defaults({},options,setOptions),options.parse&&(models=this.parse(models,options));var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort,at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1;for(i=0,l=models.length;l>i;i++){if(attrs=models[i],id=attrs instanceof Model?model=attrs:attrs[targetModel.prototype.idAttribute],existing=this.get(id))remove&&(modelMap[existing.cid]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)),models[i]=existing;else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;toAdd.push(model),model.on("all",this._onModelEvent,this),this._byId[model.cid]=model,null!=model.id&&(this._byId[model.id]=model)}order&&order.push(existing||model)}if(remove){for(i=0,l=this.length;l>i;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;l>i;i++)this.models.splice(at+i,0,toAdd[i]);else{order&&(this.models.length=0);var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;l>i;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);return options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){return null==obj?void 0:this._byId[obj.id]||this._byId[obj.cid]||this._byId[obj]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{},void 0===options.parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp,options){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs.collection||(attrs.collection=this),attrs;options=options?_.clone(options):{},options.collection=this;var model=new this.model(attrs,options);return model.validationError?(this.trigger("invalid",this,model.validationError,options),!1):model},_removeReference:function(model){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs["class"]=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){return xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend?beforeSend.apply(this,arguments):void 0}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"===params.type&&noXhrPatch&&(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);callback&&callback.apply(router,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param){return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/[?#].*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;
var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.slice(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange&&(this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment)),this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location,atRoot=loc.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!atRoot)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&atRoot&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment+loc.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(){var current=this.getFragment();return current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment?!1:(this.iframe&&this.navigate(current),this.loadUrl(),void 0)},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){return handler.route.test(fragment)?(handler.callback(fragment),!0):void 0})},navigate:function(fragment,options){if(!History.started)return!1;options&&options!==!0||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment!==fragment){if(this.fragment=fragment,""===fragment&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}}}.call(this),// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
Backbone.ChildViewContainer=function(Backbone,_){var Container=function(views){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),_.each(views,this.add,this)};_.extend(Container.prototype,{add:function(view,customIndex){var viewCid=view.cid;this._views[viewCid]=view,view.model&&(this._indexByModel[view.model.cid]=viewCid),customIndex&&(this._indexByCustom[customIndex]=viewCid),this._updateLength()},findByModel:function(model){return this.findByModelCid(model.cid)},findByModelCid:function(modelCid){var viewCid=this._indexByModel[modelCid];return this.findByCid(viewCid)},findByCustom:function(index){var viewCid=this._indexByCustom[index];return this.findByCid(viewCid)},findByIndex:function(index){return _.values(this._views)[index]},findByCid:function(cid){return this._views[cid]},remove:function(view){var viewCid=view.cid;view.model&&delete this._indexByModel[view.model.cid],_.any(this._indexByCustom,function(cid,key){return cid===viewCid?(delete this._indexByCustom[key],!0):void 0},this),delete this._views[viewCid],this._updateLength()},call:function(method){this.apply(method,_.tail(arguments))},apply:function(method,args){_.each(this._views,function(view){_.isFunction(view[method])&&view[method].apply(view,args||[])})},_updateLength:function(){this.length=_.size(this._views)}});var methods=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return _.each(methods,function(method){Container.prototype[method]=function(){var views=_.values(this._views),args=[views].concat(_.toArray(arguments));return _[method].apply(_,args)}}),Container}(Backbone,_),// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
Backbone.Wreqr=function(Backbone,Marionette,_){"use strict";var Wreqr={};return Wreqr.Handlers=function(Backbone,_){var Handlers=function(options){this.options=options,this._wreqrHandlers={},_.isFunction(this.initialize)&&this.initialize(options)};return Handlers.extend=Backbone.Model.extend,_.extend(Handlers.prototype,Backbone.Events,{setHandlers:function(handlers){_.each(handlers,function(handler,name){var context=null;_.isObject(handler)&&!_.isFunction(handler)&&(context=handler.context,handler=handler.callback),this.setHandler(name,handler,context)},this)},setHandler:function(name,handler,context){var config={callback:handler,context:context};this._wreqrHandlers[name]=config,this.trigger("handler:add",name,handler,context)},hasHandler:function(name){return!!this._wreqrHandlers[name]},getHandler:function(name){var config=this._wreqrHandlers[name];if(!config)throw new Error("Handler not found for '"+name+"'");return function(){var args=Array.prototype.slice.apply(arguments);return config.callback.apply(config.context,args)}},removeHandler:function(name){delete this._wreqrHandlers[name]},removeAllHandlers:function(){this._wreqrHandlers={}}}),Handlers}(Backbone,_),Wreqr.CommandStorage=function(){var CommandStorage=function(options){this.options=options,this._commands={},_.isFunction(this.initialize)&&this.initialize(options)};return _.extend(CommandStorage.prototype,Backbone.Events,{getCommands:function(commandName){var commands=this._commands[commandName];return commands||(commands={command:commandName,instances:[]},this._commands[commandName]=commands),commands},addCommand:function(commandName,args){var command=this.getCommands(commandName);command.instances.push(args)},clearCommands:function(commandName){var command=this.getCommands(commandName);command.instances=[]}}),CommandStorage}(),Wreqr.Commands=function(Wreqr){return Wreqr.Handlers.extend({storageType:Wreqr.CommandStorage,constructor:function(options){this.options=options||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var args=Array.prototype.slice.call(arguments);Wreqr.Handlers.prototype.constructor.apply(this,args)},execute:function(name,args){name=arguments[0],args=Array.prototype.slice.call(arguments,1),this.hasHandler(name)?this.getHandler(name).apply(this,args):this.storage.addCommand(name,args)},_executeCommands:function(name,handler,context){var command=this.storage.getCommands(name);_.each(command.instances,function(args){handler.apply(context,args)}),this.storage.clearCommands(name)},_initializeStorage:function(options){var storage,StorageType=options.storageType||this.storageType;storage=_.isFunction(StorageType)?new StorageType:StorageType,this.storage=storage}})}(Wreqr),Wreqr.RequestResponse=function(Wreqr){return Wreqr.Handlers.extend({request:function(){var name=arguments[0],args=Array.prototype.slice.call(arguments,1);return this.getHandler(name).apply(this,args)}})}(Wreqr),Wreqr.EventAggregator=function(Backbone,_){var EA=function(){};return EA.extend=Backbone.Model.extend,_.extend(EA.prototype,Backbone.Events),EA}(Backbone,_),Wreqr}(Backbone,Backbone.Marionette,_);var Marionette=function(global,Backbone,_){"use strict";function slice(args){return protoSlice.call(args)}function throwError(message,name){var error=new Error(message);throw error.name=name||"Error",error}var Marionette={};Backbone.Marionette=Marionette,Marionette.$=Backbone.$;var protoSlice=Array.prototype.slice;return Marionette.extend=Backbone.Model.extend,Marionette.getOption=function(target,optionName){if(target&&optionName){var value;return value=target.options&&optionName in target.options&&void 0!==target.options[optionName]?target.options[optionName]:target[optionName]}},Marionette.triggerMethod=function(){function getEventName(match,prefix,eventName){return eventName.toUpperCase()}var splitter=/(^|:)(\w)/gi,triggerMethod=function(event){var methodName="on"+event.replace(splitter,getEventName),method=this[methodName];return _.isFunction(this.trigger)&&this.trigger.apply(this,arguments),_.isFunction(method)?method.apply(this,_.tail(arguments)):void 0};return triggerMethod}(),Marionette.MonitorDOMRefresh=function(){function handleShow(view){view._isShown=!0,triggerDOMRefresh(view)}function handleRender(view){view._isRendered=!0,triggerDOMRefresh(view)}function triggerDOMRefresh(view){view._isShown&&view._isRendered&&_.isFunction(view.triggerMethod)&&view.triggerMethod("dom:refresh")}return function(view){view.listenTo(view,"show",function(){handleShow(view)}),view.listenTo(view,"render",function(){handleRender(view)})}}(),function(Marionette){function bindFromStrings(target,entity,evt,methods){var methodNames=methods.split(/\s+/);_.each(methodNames,function(methodName){var method=target[methodName];method||throwError("Method '"+methodName+"' was configured as an event handler, but does not exist."),target.listenTo(entity,evt,method,target)})}function bindToFunction(target,entity,evt,method){target.listenTo(entity,evt,method,target)}function unbindFromStrings(target,entity,evt,methods){var methodNames=methods.split(/\s+/);_.each(methodNames,function(methodName){var method=target[methodName];target.stopListening(entity,evt,method,target)})}function unbindToFunction(target,entity,evt,method){target.stopListening(entity,evt,method,target)}function iterateEvents(target,entity,bindings,functionCallback,stringCallback){entity&&bindings&&(_.isFunction(bindings)&&(bindings=bindings.call(target)),_.each(bindings,function(methods,evt){_.isFunction(methods)?functionCallback(target,entity,evt,methods):stringCallback(target,entity,evt,methods)}))}Marionette.bindEntityEvents=function(target,entity,bindings){iterateEvents(target,entity,bindings,bindToFunction,bindFromStrings)},Marionette.unbindEntityEvents=function(target,entity,bindings){iterateEvents(target,entity,bindings,unbindToFunction,unbindFromStrings)}}(Marionette),Marionette.Callbacks=function(){this._deferred=Marionette.$.Deferred(),this._callbacks=[]},_.extend(Marionette.Callbacks.prototype,{add:function(callback,contextOverride){this._callbacks.push({cb:callback,ctx:contextOverride}),this._deferred.done(function(context,options){contextOverride&&(context=contextOverride),callback.call(context,options)})},run:function(options,context){this._deferred.resolve(context,options)},reset:function(){var callbacks=this._callbacks;this._deferred=Marionette.$.Deferred(),this._callbacks=[],_.each(callbacks,function(cb){this.add(cb.cb,cb.ctx)},this)}}),Marionette.Controller=function(options){this.triggerMethod=Marionette.triggerMethod,this.options=options||{},_.isFunction(this.initialize)&&this.initialize(this.options)},Marionette.Controller.extend=Marionette.extend,_.extend(Marionette.Controller.prototype,Backbone.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),Marionette.Region=function(options){if(this.options=options||{},this.el=Marionette.getOption(this,"el"),!this.el){var err=new Error("An 'el' must be specified for a region.");throw err.name="NoElError",err}if(this.initialize){var args=Array.prototype.slice.apply(arguments);this.initialize.apply(this,args)}},_.extend(Marionette.Region,{buildRegion:function(regionConfig,defaultRegionType){var regionIsString="string"==typeof regionConfig,regionSelectorIsString="string"==typeof regionConfig.selector,regionTypeIsUndefined="undefined"==typeof regionConfig.regionType,regionIsType="function"==typeof regionConfig;if(!regionIsType&&!regionIsString&&!regionSelectorIsString)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var selector,RegionType;regionIsString&&(selector=regionConfig),regionConfig.selector&&(selector=regionConfig.selector),regionIsType&&(RegionType=regionConfig),!regionIsType&&regionTypeIsUndefined&&(RegionType=defaultRegionType),regionConfig.regionType&&(RegionType=regionConfig.regionType);var region=new RegionType({el:selector});return regionConfig.parentEl&&(region.getEl=function(selector){var parentEl=regionConfig.parentEl;return _.isFunction(parentEl)&&(parentEl=parentEl()),parentEl.find(selector)}),region}}),_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(view){this.ensureEl();var isViewClosed=view.isClosed||_.isUndefined(view.$el),isDifferentView=view!==this.currentView;isDifferentView&&this.close(),view.render(),(isDifferentView||isViewClosed)&&this.open(view),this.currentView=view,Marionette.triggerMethod.call(this,"show",view),Marionette.triggerMethod.call(view,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(selector){return Marionette.$(selector)},open:function(view){this.$el.empty().append(view.el)},close:function(){var view=this.currentView;view&&!view.isClosed&&(view.close?view.close():view.remove&&view.remove(),Marionette.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(view){this.currentView=view},reset:function(){this.close(),delete this.$el}}),Marionette.Region.extend=Marionette.extend,Marionette.RegionManager=function(Marionette){var RegionManager=Marionette.Controller.extend({constructor:function(options){this._regions={},Marionette.Controller.prototype.constructor.call(this,options)},addRegions:function(regionDefinitions,defaults){var regions={};return _.each(regionDefinitions,function(definition,name){"string"==typeof definition&&(definition={selector:definition}),definition.selector&&(definition=_.defaults({},definition,defaults));var region=this.addRegion(name,definition);regions[name]=region},this),regions},addRegion:function(name,definition){var region,isObject=_.isObject(definition),isString=_.isString(definition),hasSelector=!!definition.selector;return region=isString||isObject&&hasSelector?Marionette.Region.buildRegion(definition,Marionette.Region):_.isFunction(definition)?Marionette.Region.buildRegion(definition,Marionette.Region):definition,this._store(name,region),this.triggerMethod("region:add",name,region),region},get:function(name){return this._regions[name]},removeRegion:function(name){var region=this._regions[name];this._remove(name,region)},removeRegions:function(){_.each(this._regions,function(region,name){this._remove(name,region)},this)},closeRegions:function(){_.each(this._regions,function(region){region.close()},this)},close:function(){this.removeRegions();var args=Array.prototype.slice.call(arguments);Marionette.Controller.prototype.close.apply(this,args)},_store:function(name,region){this._regions[name]=region,this._setLength()},_remove:function(name,region){region.close(),delete this._regions[name],this._setLength(),this.triggerMethod("region:remove",name,region)},_setLength:function(){this.length=_.size(this._regions)}}),methods=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return _.each(methods,function(method){RegionManager.prototype[method]=function(){var regions=_.values(this._regions),args=[regions].concat(_.toArray(arguments));return _[method].apply(_,args)}}),RegionManager}(Marionette),Marionette.TemplateCache=function(templateId){this.templateId=templateId},_.extend(Marionette.TemplateCache,{templateCaches:{},get:function(templateId){var cachedTemplate=this.templateCaches[templateId];return cachedTemplate||(cachedTemplate=new Marionette.TemplateCache(templateId),this.templateCaches[templateId]=cachedTemplate),cachedTemplate.load()},clear:function(){var i,args=slice(arguments),length=args.length;if(length>0)for(i=0;length>i;i++)delete this.templateCaches[args[i]];else this.templateCaches={}}}),_.extend(Marionette.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var template=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(template),this.compiledTemplate},loadTemplate:function(templateId){var template=Marionette.$(templateId).html();return template&&0!==template.length||throwError("Could not find template: '"+templateId+"'","NoTemplateError"),template},compileTemplate:function(rawTemplate){return _.template(rawTemplate)}}),Marionette.Renderer={render:function(template,data){if(!template){var error=new Error("Cannot render the template since it's false, null or undefined.");throw error.name="TemplateNotFoundError",error}var templateFunc;return(templateFunc="function"==typeof template?template:Marionette.TemplateCache.get(template))(data)}},Marionette.View=Backbone.View.extend({constructor:function(options){_.bindAll(this,"render");var args=Array.prototype.slice.apply(arguments);this.options=_.extend({},this.options,options),this.events=this.normalizeUIKeys(_.result(this,"events")),Backbone.View.prototype.constructor.apply(this,args),Marionette.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:Marionette.triggerMethod,getTemplate:function(){return Marionette.getOption(this,"template")},mixinTemplateHelpers:function(target){target=target||{};var templateHelpers=Marionette.getOption(this,"templateHelpers");return _.isFunction(templateHelpers)&&(templateHelpers=templateHelpers.call(this)),_.extend(target,templateHelpers)},normalizeUIKeys:function(hash){return"undefined"!=typeof hash?(_.each(_.keys(hash),function(v){var split=v.split("@ui.");2===split.length&&(hash[split[0]+this.ui[split[1]]]=hash[v],delete hash[v])},this),hash):void 0},configureTriggers:function(){if(this.triggers){var triggerEvents={},triggers=this.normalizeUIKeys(_.result(this,"triggers"));return _.each(triggers,function(value,key){var hasOptions=_.isObject(value),eventName=hasOptions?value.event:value;triggerEvents[key]=function(e){if(e){var prevent=e.preventDefault,stop=e.stopPropagation,shouldPrevent=hasOptions?value.preventDefault:prevent,shouldStop=hasOptions?value.stopPropagation:stop;shouldPrevent&&prevent&&prevent.apply(e),shouldStop&&stop&&stop.apply(e)}var args={view:this,model:this.model,collection:this.collection};this.triggerMethod(eventName,args)}},this),triggerEvents}},delegateEvents:function(events){this._delegateDOMEvents(events),Marionette.bindEntityEvents(this,this.model,Marionette.getOption(this,"modelEvents")),Marionette.bindEntityEvents(this,this.collection,Marionette.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(events){events=events||this.events,_.isFunction(events)&&(events=events.call(this));var combinedEvents={},triggers=this.configureTriggers();_.extend(combinedEvents,events,triggers),Backbone.View.prototype.delegateEvents.call(this,combinedEvents)},undelegateEvents:function(){var args=Array.prototype.slice.call(arguments);Backbone.View.prototype.undelegateEvents.apply(this,args),Marionette.unbindEntityEvents(this,this.model,Marionette.getOption(this,"modelEvents")),Marionette.unbindEntityEvents(this,this.collection,Marionette.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var shouldClose=this.triggerMethod("before:close");shouldClose!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var bindings=_.result(this,"_uiBindings");this.ui={},_.each(_.keys(bindings),function(key){var selector=bindings[key];this.ui[key]=this.$(selector)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(_.each(this.ui,function($el,name){delete this.ui[name]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),Marionette.ItemView=Marionette.View.extend({constructor:function(){Marionette.View.prototype.constructor.apply(this,slice(arguments))},serializeData:function(){var data={};return this.model?data=this.model.toJSON():this.collection&&(data={items:this.collection.toJSON()}),data},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var data=this.serializeData();data=this.mixinTemplateHelpers(data);var template=this.getTemplate(),html=Marionette.Renderer.render(template,data);return this.$el.html(html),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),Marionette.View.prototype.close.apply(this,slice(arguments)),this.triggerMethod("item:closed"))}}),Marionette.CollectionView=Marionette.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),Marionette.View.prototype.constructor.apply(this,slice(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer),this.initRenderBuffer(),this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(item){this.closeEmptyView();var ItemView=this.getItemView(item),index=this.collection.indexOf(item);this.addItemView(item,ItemView,index)},onShowCalled:function(){this.children.each(function(child){Marionette.triggerMethod.call(child,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView(),this.endBuffering()},showCollection:function(){var ItemView;this.collection.each(function(item,index){ItemView=this.getItemView(item),this.addItemView(item,ItemView,index)},this)},showEmptyView:function(){var EmptyView=this.getEmptyView();if(EmptyView&&!this._showingEmptyView){this._showingEmptyView=!0;var model=new Backbone.Model;this.addItemView(model,EmptyView,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return Marionette.getOption(this,"emptyView")},getItemView:function(){var itemView=Marionette.getOption(this,"itemView");return itemView||throwError("An `itemView` must be specified","NoItemViewError"),itemView},addItemView:function(item,ItemView,index){var itemViewOptions=Marionette.getOption(this,"itemViewOptions");_.isFunction(itemViewOptions)&&(itemViewOptions=itemViewOptions.call(this,item,index));var view=this.buildItemView(item,ItemView,itemViewOptions);this.addChildViewEventForwarding(view),this.triggerMethod("before:item:added",view),this.children.add(view),this.renderItemView(view,index),this._isShown&&Marionette.triggerMethod.call(view,"show"),this.triggerMethod("after:item:added",view)},addChildViewEventForwarding:function(view){var prefix=Marionette.getOption(this,"itemViewEventPrefix");this.listenTo(view,"all",function(){var args=slice(arguments);args[0]=prefix+":"+args[0],args.splice(1,0,view),Marionette.triggerMethod.apply(this,args)},this)},renderItemView:function(view,index){view.render(),this.appendHtml(this,view,index)},buildItemView:function(item,ItemViewType,itemViewOptions){var options=_.extend({model:item},itemViewOptions);return new ItemViewType(options)},removeItemView:function(item){var view=this.children.findByModel(item);this.removeChildView(view),this.checkEmpty()},removeChildView:function(view){view&&(this.stopListening(view),view.close?view.close():view.remove&&view.remove(),this.children.remove(view)),this.triggerMethod("item:removed",view)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendBuffer:function(collectionView,buffer){collectionView.$el.append(buffer)},appendHtml:function(collectionView,itemView){collectionView.isBuffering?collectionView.elBuffer.appendChild(itemView.el):collectionView.$el.append(itemView.el)},_initChildViewStorage:function(){this.children=new Backbone.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),Marionette.View.prototype.close.apply(this,slice(arguments)))},closeChildren:function(){this.children.each(function(child){this.removeChildView(child)},this),this.checkEmpty()}}),Marionette.CompositeView=Marionette.CollectionView.extend({constructor:function(){Marionette.CollectionView.prototype.constructor.apply(this,slice(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var itemView=Marionette.getOption(this,"itemView")||this.constructor;return itemView||throwError("An `itemView` must be specified","NoItemViewError"),itemView},serializeData:function(){var data={};return this.model&&(data=this.model.toJSON()),data},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var html=this.renderModel();return this.$el.html(html),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(Marionette.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var data={};data=this.serializeData(),data=this.mixinTemplateHelpers(data);var template=this.getTemplate();return Marionette.Renderer.render(template,data)},appendBuffer:function(compositeView,buffer){var $container=this.getItemViewContainer(compositeView);$container.append(buffer)},appendHtml:function(compositeView,itemView){if(compositeView.isBuffering)compositeView.elBuffer.appendChild(itemView.el);else{var $container=this.getItemViewContainer(compositeView);$container.append(itemView.el)}},getItemViewContainer:function(containerView){if("$itemViewContainer"in containerView)return containerView.$itemViewContainer;var container,itemViewContainer=Marionette.getOption(containerView,"itemViewContainer");if(itemViewContainer){var selector=_.isFunction(itemViewContainer)?itemViewContainer():itemViewContainer;container=containerView.$(selector),container.length<=0&&throwError("The specified `itemViewContainer` was not found: "+containerView.itemViewContainer,"ItemViewContainerMissingError")}else container=containerView.$el;return containerView.$itemViewContainer=container,container},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),Marionette.Layout=Marionette.ItemView.extend({regionType:Marionette.Region,constructor:function(options){options=options||{},this._firstRender=!0,this._initializeRegions(options),Marionette.ItemView.prototype.constructor.call(this,options)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var args=Array.prototype.slice.apply(arguments),result=Marionette.ItemView.prototype.render.apply(this,args);return result},close:function(){if(!this.isClosed){this.regionManager.close();var args=Array.prototype.slice.apply(arguments);Marionette.ItemView.prototype.close.apply(this,args)}},addRegion:function(name,definition){var regions={};return regions[name]=definition,this._buildRegions(regions)[name]},addRegions:function(regions){return this.regions=_.extend({},this.regions,regions),this._buildRegions(regions)},removeRegion:function(name){return delete this.regions[name],this.regionManager.removeRegion(name)},_buildRegions:function(regions){var that=this,defaults={regionType:Marionette.getOption(this,"regionType"),parentEl:function(){return that.$el}};return this.regionManager.addRegions(regions,defaults)},_initializeRegions:function(options){var regions;this._initRegionManager(),regions=_.isFunction(this.regions)?this.regions(options):this.regions||{},this.addRegions(regions)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(region){region.reset()})},_initRegionManager:function(){this.regionManager=new Marionette.RegionManager,this.listenTo(this.regionManager,"region:add",function(name,region){this[name]=region,this.trigger("region:add",name,region)}),this.listenTo(this.regionManager,"region:remove",function(name,region){delete this[name],this.trigger("region:remove",name,region)})}}),Marionette.AppRouter=Backbone.Router.extend({constructor:function(options){Backbone.Router.prototype.constructor.apply(this,slice(arguments)),this.options=options||{};var appRoutes=Marionette.getOption(this,"appRoutes"),controller=this._getController();this.processAppRoutes(controller,appRoutes)},appRoute:function(route,methodName){var controller=this._getController();this._addAppRoute(controller,route,methodName)},processAppRoutes:function(controller,appRoutes){if(appRoutes){var routeNames=_.keys(appRoutes).reverse();_.each(routeNames,function(route){this._addAppRoute(controller,route,appRoutes[route])},this)}},_getController:function(){return Marionette.getOption(this,"controller")},_addAppRoute:function(controller,route,methodName){var method=controller[methodName];if(!method)throw new Error("Method '"+methodName+"' was not found on the controller");this.route(route,methodName,_.bind(method,controller))}}),Marionette.Application=function(options){this._initRegionManager(),this._initCallbacks=new Marionette.Callbacks,this.vent=new Backbone.Wreqr.EventAggregator,this.commands=new Backbone.Wreqr.Commands,this.reqres=new Backbone.Wreqr.RequestResponse,this.submodules={},_.extend(this,options),this.triggerMethod=Marionette.triggerMethod},_.extend(Marionette.Application.prototype,Backbone.Events,{execute:function(){var args=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,args)},request:function(){var args=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,args)},addInitializer:function(initializer){this._initCallbacks.add(initializer)},start:function(options){this.triggerMethod("initialize:before",options),this._initCallbacks.run(options,this),this.triggerMethod("initialize:after",options),this.triggerMethod("start",options)},addRegions:function(regions){return this._regionManager.addRegions(regions)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(region){this._regionManager.removeRegion(region)},getRegion:function(region){return this._regionManager.get(region)},module:function(){var args=slice(arguments);return args.unshift(this),Marionette.Module.create.apply(Marionette.Module,args)},_initRegionManager:function(){this._regionManager=new Marionette.RegionManager,this.listenTo(this._regionManager,"region:add",function(name,region){this[name]=region}),this.listenTo(this._regionManager,"region:remove",function(name){delete this[name]})}}),Marionette.Application.extend=Marionette.extend,Marionette.Module=function(moduleName,app){this.moduleName=moduleName,this.submodules={},this._setupInitializersAndFinalizers(),this.app=app,this.startWithParent=!0,this.triggerMethod=Marionette.triggerMethod},_.extend(Marionette.Module.prototype,Backbone.Events,{addInitializer:function(callback){this._initializerCallbacks.add(callback)},addFinalizer:function(callback){this._finalizerCallbacks.add(callback)},start:function(options){this._isInitialized||(_.each(this.submodules,function(mod){mod.startWithParent&&mod.start(options)}),this.triggerMethod("before:start",options),this._initializerCallbacks.run(options,this),this._isInitialized=!0,this.triggerMethod("start",options))},stop:function(){this._isInitialized&&(this._isInitialized=!1,Marionette.triggerMethod.call(this,"before:stop"),_.each(this.submodules,function(mod){mod.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),Marionette.triggerMethod.call(this,"stop"))},addDefinition:function(moduleDefinition,customArgs){this._runModuleDefinition(moduleDefinition,customArgs)},_runModuleDefinition:function(definition,customArgs){if(definition){var args=_.flatten([this,this.app,Backbone,Marionette,Marionette.$,_,customArgs]);definition.apply(this,args)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new Marionette.Callbacks,this._finalizerCallbacks=new Marionette.Callbacks}}),_.extend(Marionette.Module,{create:function(app,moduleNames,moduleDefinition){var module=app,customArgs=slice(arguments);customArgs.splice(0,3),moduleNames=moduleNames.split(".");var length=moduleNames.length,moduleDefinitions=[];return moduleDefinitions[length-1]=moduleDefinition,_.each(moduleNames,function(moduleName,i){var parentModule=module;module=this._getModule(parentModule,moduleName,app),this._addModuleDefinition(parentModule,module,moduleDefinitions[i],customArgs)},this),module},_getModule:function(parentModule,moduleName,app){var module=parentModule[moduleName];return module||(module=new Marionette.Module(moduleName,app),parentModule[moduleName]=module,parentModule.submodules[moduleName]=module),module},_addModuleDefinition:function(parentModule,module,def,args){var fn,startWithParent;_.isFunction(def)?(fn=def,startWithParent=!0):_.isObject(def)?(fn=def.define,startWithParent=def.startWithParent):startWithParent=!0,fn&&module.addDefinition(fn,args),module.startWithParent=module.startWithParent&&startWithParent,module.startWithParent&&!module.startWithParentIsConfigured&&(module.startWithParentIsConfigured=!0,parentModule.addInitializer(function(options){module.startWithParent&&module.start(options)}))}}),Marionette}(this,Backbone,_);!function($){var plugin={},defaults={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};$.fn.bxSlider=function(options){if(0==this.length)return this;if(this.length>1)return this.each(function(){$(this).bxSlider(options)}),this;var slider={},el=this;plugin.el=this;var windowWidth=$(window).width(),windowHeight=$(window).height(),init=function(){slider.settings=$.extend({},defaults,options),slider.settings.slideWidth=parseInt(slider.settings.slideWidth),slider.children=el.children(slider.settings.slideSelector),slider.children.length<slider.settings.minSlides&&(slider.settings.minSlides=slider.children.length),slider.children.length<slider.settings.maxSlides&&(slider.settings.maxSlides=slider.children.length),slider.settings.randomStart&&(slider.settings.startSlide=Math.floor(Math.random()*slider.children.length)),slider.active={index:slider.settings.startSlide},slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1,slider.carousel&&(slider.settings.preloadImages="all"),slider.minThreshold=slider.settings.minSlides*slider.settings.slideWidth+(slider.settings.minSlides-1)*slider.settings.slideMargin,slider.maxThreshold=slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin,slider.working=!1,slider.controls={},slider.interval=null,slider.animProp="vertical"==slider.settings.mode?"top":"left",slider.usingCSS=slider.settings.useCSS&&"fade"!=slider.settings.mode&&function(){var div=document.createElement("div"),props=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in props)if(void 0!==div.style[props[i]])return slider.cssPrefix=props[i].replace("Perspective","").toLowerCase(),slider.animProp="-"+slider.cssPrefix+"-transform",!0;
return!1}(),"vertical"==slider.settings.mode&&(slider.settings.maxSlides=slider.settings.minSlides),el.data("origStyle",el.attr("style")),el.children(slider.settings.slideSelector).each(function(){$(this).data("origStyle",$(this).attr("style"))}),setup()},setup=function(){el.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),slider.viewport=el.parent(),slider.loader=$('<div class="bx-loading" />'),slider.viewport.prepend(slider.loader),el.css({width:"horizontal"==slider.settings.mode?100*slider.children.length+215+"%":"auto",position:"relative"}),slider.usingCSS&&slider.settings.easing?el.css("-"+slider.cssPrefix+"-transition-timing-function",slider.settings.easing):slider.settings.easing||(slider.settings.easing="swing");getNumberSlidesShowing();slider.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),slider.viewport.parent().css({maxWidth:getViewportMaxWidth()}),slider.settings.pager||slider.viewport.parent().css({margin:"0 auto 0px"}),slider.children.css({"float":"horizontal"==slider.settings.mode?"left":"none",listStyle:"none",position:"relative"}),slider.children.css("width",getSlideWidth()),"horizontal"==slider.settings.mode&&slider.settings.slideMargin>0&&slider.children.css("marginRight",slider.settings.slideMargin),"vertical"==slider.settings.mode&&slider.settings.slideMargin>0&&slider.children.css("marginBottom",slider.settings.slideMargin),"fade"==slider.settings.mode&&(slider.children.css({position:"absolute",zIndex:0,display:"none"}),slider.children.eq(slider.settings.startSlide).css({zIndex:50,display:"block"})),slider.controls.el=$('<div class="bx-controls" />'),slider.settings.captions&&appendCaptions(),slider.active.last=slider.settings.startSlide==getPagerQty()-1,slider.settings.video&&el.fitVids();var preloadSelector=slider.children.eq(slider.settings.startSlide);"all"==slider.settings.preloadImages&&(preloadSelector=slider.children),slider.settings.ticker?slider.settings.pager=!1:(slider.settings.pager&&appendPager(),slider.settings.controls&&appendControls(),slider.settings.auto&&slider.settings.autoControls&&appendControlsAuto(),(slider.settings.controls||slider.settings.autoControls||slider.settings.pager)&&slider.viewport.after(slider.controls.el)),loadElements(preloadSelector,start)},loadElements=function(selector,callback){var total=selector.find("img, iframe").length;if(0==total)return callback(),void 0;var count=0;selector.find("img, iframe").each(function(){$(this).one("load",function(){++count==total&&callback()}).each(function(){this.complete&&$(this).load()})})},start=function(){if(slider.settings.infiniteLoop&&"fade"!=slider.settings.mode&&!slider.settings.ticker){var slice="vertical"==slider.settings.mode?slider.settings.minSlides:slider.settings.maxSlides,sliceAppend=slider.children.slice(0,slice).clone().addClass("bx-clone"),slicePrepend=slider.children.slice(-slice).clone().addClass("bx-clone");el.append(sliceAppend).prepend(slicePrepend)}slider.loader.remove(),setSlidePosition(),"vertical"==slider.settings.mode&&(slider.settings.adaptiveHeight=!0),slider.viewport.height(getViewportHeight()),el.redrawSlider(),slider.settings.onSliderLoad(slider.active.index),slider.initialized=!0,slider.settings.responsive&&$(window).bind("resize",resizeWindow),slider.settings.auto&&slider.settings.autoStart&&initAuto(),slider.settings.ticker&&initTicker(),slider.settings.pager&&updatePagerActive(slider.settings.startSlide),slider.settings.controls&&updateDirectionControls(),slider.settings.touchEnabled&&!slider.settings.ticker&&initTouch()},getViewportHeight=function(){var height=0,children=$();if("vertical"==slider.settings.mode||slider.settings.adaptiveHeight)if(slider.carousel){var currentIndex=1==slider.settings.moveSlides?slider.active.index:slider.active.index*getMoveBy();for(children=slider.children.eq(currentIndex),i=1;i<=slider.settings.maxSlides-1;i++)children=currentIndex+i>=slider.children.length?children.add(slider.children.eq(i-1)):children.add(slider.children.eq(currentIndex+i))}else children=slider.children.eq(slider.active.index);else children=slider.children;return"vertical"==slider.settings.mode?(children.each(function(){height+=$(this).outerHeight()}),slider.settings.slideMargin>0&&(height+=slider.settings.slideMargin*(slider.settings.minSlides-1))):height=Math.max.apply(Math,children.map(function(){return $(this).outerHeight(!1)}).get()),height},getViewportMaxWidth=function(){var width="100%";return slider.settings.slideWidth>0&&(width="horizontal"==slider.settings.mode?slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin:slider.settings.slideWidth),width},getSlideWidth=function(){var newElWidth=slider.settings.slideWidth,wrapWidth=slider.viewport.width();return 0==slider.settings.slideWidth||slider.settings.slideWidth>wrapWidth&&!slider.carousel||"vertical"==slider.settings.mode?newElWidth=wrapWidth:slider.settings.maxSlides>1&&"horizontal"==slider.settings.mode&&(wrapWidth>slider.maxThreshold||wrapWidth<slider.minThreshold&&(newElWidth=(wrapWidth-slider.settings.slideMargin*(slider.settings.minSlides-1))/slider.settings.minSlides)),newElWidth},getNumberSlidesShowing=function(){var slidesShowing=1;if("horizontal"==slider.settings.mode&&slider.settings.slideWidth>0)if(slider.viewport.width()<slider.minThreshold)slidesShowing=slider.settings.minSlides;else if(slider.viewport.width()>slider.maxThreshold)slidesShowing=slider.settings.maxSlides;else{var childWidth=slider.children.first().width();slidesShowing=Math.floor(slider.viewport.width()/childWidth)}else"vertical"==slider.settings.mode&&(slidesShowing=slider.settings.minSlides);return slidesShowing},getPagerQty=function(){var pagerQty=0;if(slider.settings.moveSlides>0)if(slider.settings.infiniteLoop)pagerQty=slider.children.length/getMoveBy();else for(var breakPoint=0,counter=0;breakPoint<slider.children.length;)++pagerQty,breakPoint=counter+getNumberSlidesShowing(),counter+=slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing();else pagerQty=Math.ceil(slider.children.length/getNumberSlidesShowing());return pagerQty},getMoveBy=function(){return slider.settings.moveSlides>0&&slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing()},setSlidePosition=function(){if(slider.children.length>slider.settings.maxSlides&&slider.active.last&&!slider.settings.infiniteLoop){if("horizontal"==slider.settings.mode){var lastChild=slider.children.last(),position=lastChild.position();setPositionProperty(-(position.left-(slider.viewport.width()-lastChild.width())),"reset",0)}else if("vertical"==slider.settings.mode){var lastShowingIndex=slider.children.length-slider.settings.minSlides,position=slider.children.eq(lastShowingIndex).position();setPositionProperty(-position.top,"reset",0)}}else{var position=slider.children.eq(slider.active.index*getMoveBy()).position();slider.active.index==getPagerQty()-1&&(slider.active.last=!0),void 0!=position&&("horizontal"==slider.settings.mode?setPositionProperty(-position.left,"reset",0):"vertical"==slider.settings.mode&&setPositionProperty(-position.top,"reset",0))}},setPositionProperty=function(value,type,duration,params){if(slider.usingCSS){var propValue="vertical"==slider.settings.mode?"translate3d(0, "+value+"px, 0)":"translate3d("+value+"px, 0, 0)";el.css("-"+slider.cssPrefix+"-transition-duration",duration/1e3+"s"),"slide"==type?(el.css(slider.animProp,propValue),el.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){el.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),updateAfterSlideTransition()})):"reset"==type?el.css(slider.animProp,propValue):"ticker"==type&&(el.css("-"+slider.cssPrefix+"-transition-timing-function","linear"),el.css(slider.animProp,propValue),el.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){el.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),setPositionProperty(params.resetValue,"reset",0),tickerLoop()}))}else{var animateObj={};animateObj[slider.animProp]=value,"slide"==type?el.animate(animateObj,duration,slider.settings.easing,function(){updateAfterSlideTransition()}):"reset"==type?el.css(slider.animProp,value):"ticker"==type&&el.animate(animateObj,speed,"linear",function(){setPositionProperty(params.resetValue,"reset",0),tickerLoop()})}},populatePager=function(){for(var pagerHtml="",pagerQty=getPagerQty(),i=0;pagerQty>i;i++){var linkContent="";slider.settings.buildPager&&$.isFunction(slider.settings.buildPager)?(linkContent=slider.settings.buildPager(i),slider.pagerEl.addClass("bx-custom-pager")):(linkContent=i+1,slider.pagerEl.addClass("bx-default-pager")),pagerHtml+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+linkContent+"</a></div>"}slider.pagerEl.html(pagerHtml)},appendPager=function(){slider.settings.pagerCustom?slider.pagerEl=$(slider.settings.pagerCustom):(slider.pagerEl=$('<div class="bx-pager" />'),slider.settings.pagerSelector?$(slider.settings.pagerSelector).html(slider.pagerEl):slider.controls.el.addClass("bx-has-pager").append(slider.pagerEl),populatePager()),slider.pagerEl.delegate("a","click",clickPagerBind)},appendControls=function(){slider.controls.next=$('<a class="bx-next" href="">'+slider.settings.nextText+"</a>"),slider.controls.prev=$('<a class="bx-prev" href="">'+slider.settings.prevText+"</a>"),slider.controls.next.bind("click",clickNextBind),slider.controls.prev.bind("click",clickPrevBind),slider.settings.nextSelector&&$(slider.settings.nextSelector).append(slider.controls.next),slider.settings.prevSelector&&$(slider.settings.prevSelector).append(slider.controls.prev),slider.settings.nextSelector||slider.settings.prevSelector||(slider.controls.directionEl=$('<div class="bx-controls-direction" />'),slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next),slider.controls.el.addClass("bx-has-controls-direction").append(slider.controls.directionEl))},appendControlsAuto=function(){slider.controls.start=$('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+slider.settings.startText+"</a></div>"),slider.controls.stop=$('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+slider.settings.stopText+"</a></div>"),slider.controls.autoEl=$('<div class="bx-controls-auto" />'),slider.controls.autoEl.delegate(".bx-start","click",clickStartBind),slider.controls.autoEl.delegate(".bx-stop","click",clickStopBind),slider.settings.autoControlsCombine?slider.controls.autoEl.append(slider.controls.start):slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop),slider.settings.autoControlsSelector?$(slider.settings.autoControlsSelector).html(slider.controls.autoEl):slider.controls.el.addClass("bx-has-controls-auto").append(slider.controls.autoEl),updateAutoControls(slider.settings.autoStart?"stop":"start")},appendCaptions=function(){slider.children.each(function(){var title=$(this).find("img:first").attr("title");void 0!=title&&(""+title).length&&$(this).append('<div class="bx-caption"><span>'+title+"</span></div>")})},clickNextBind=function(e){slider.settings.auto&&el.stopAuto(),el.goToNextSlide(),e.preventDefault()},clickPrevBind=function(e){slider.settings.auto&&el.stopAuto(),el.goToPrevSlide(),e.preventDefault()},clickStartBind=function(e){el.startAuto(),e.preventDefault()},clickStopBind=function(e){el.stopAuto(),e.preventDefault()},clickPagerBind=function(e){slider.settings.auto&&el.stopAuto();var pagerLink=$(e.currentTarget),pagerIndex=parseInt(pagerLink.attr("data-slide-index"));pagerIndex!=slider.active.index&&el.goToSlide(pagerIndex),e.preventDefault()},updatePagerActive=function(slideIndex){var len=slider.children.length;return"short"==slider.settings.pagerType?(slider.settings.maxSlides>1&&(len=Math.ceil(slider.children.length/slider.settings.maxSlides)),slider.pagerEl.html(slideIndex+1+slider.settings.pagerShortSeparator+len),void 0):(slider.pagerEl.find("a").removeClass("active"),slider.pagerEl.each(function(i,el){$(el).find("a").eq(slideIndex).addClass("active")}),void 0)},updateAfterSlideTransition=function(){if(slider.settings.infiniteLoop){var position="";0==slider.active.index?position=slider.children.eq(0).position():slider.active.index==getPagerQty()-1&&slider.carousel?position=slider.children.eq((getPagerQty()-1)*getMoveBy()).position():slider.active.index==slider.children.length-1&&(position=slider.children.eq(slider.children.length-1).position()),"horizontal"==slider.settings.mode?setPositionProperty(-position.left,"reset",0):"vertical"==slider.settings.mode&&setPositionProperty(-position.top,"reset",0)}slider.working=!1,slider.settings.onSlideAfter(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index)},updateAutoControls=function(state){slider.settings.autoControlsCombine?slider.controls.autoEl.html(slider.controls[state]):(slider.controls.autoEl.find("a").removeClass("active"),slider.controls.autoEl.find("a:not(.bx-"+state+")").addClass("active"))},updateDirectionControls=function(){1==getPagerQty()?(slider.controls.prev.addClass("disabled"),slider.controls.next.addClass("disabled")):!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd&&(0==slider.active.index?(slider.controls.prev.addClass("disabled"),slider.controls.next.removeClass("disabled")):slider.active.index==getPagerQty()-1?(slider.controls.next.addClass("disabled"),slider.controls.prev.removeClass("disabled")):(slider.controls.prev.removeClass("disabled"),slider.controls.next.removeClass("disabled")))},initAuto=function(){if(slider.settings.autoDelay>0){setTimeout(el.startAuto,slider.settings.autoDelay)}else el.startAuto();slider.settings.autoHover&&el.hover(function(){slider.interval&&(el.stopAuto(!0),slider.autoPaused=!0)},function(){slider.autoPaused&&(el.startAuto(!0),slider.autoPaused=null)})},initTicker=function(){var startPosition=0;if("next"==slider.settings.autoDirection)el.append(slider.children.clone().addClass("bx-clone"));else{el.prepend(slider.children.clone().addClass("bx-clone"));var position=slider.children.first().position();startPosition="horizontal"==slider.settings.mode?-position.left:-position.top}setPositionProperty(startPosition,"reset",0),slider.settings.pager=!1,slider.settings.controls=!1,slider.settings.autoControls=!1,slider.settings.tickerHover&&!slider.usingCSS&&slider.viewport.hover(function(){el.stop()},function(){var totalDimens=0;slider.children.each(function(){totalDimens+="horizontal"==slider.settings.mode?$(this).outerWidth(!0):$(this).outerHeight(!0)});var ratio=slider.settings.speed/totalDimens,property="horizontal"==slider.settings.mode?"left":"top",newSpeed=ratio*(totalDimens-Math.abs(parseInt(el.css(property))));tickerLoop(newSpeed)}),tickerLoop()},tickerLoop=function(resumeSpeed){speed=resumeSpeed?resumeSpeed:slider.settings.speed;var position={left:0,top:0},reset={left:0,top:0};"next"==slider.settings.autoDirection?position=el.find(".bx-clone").first().position():reset=slider.children.first().position();var animateProperty="horizontal"==slider.settings.mode?-position.left:-position.top,resetValue="horizontal"==slider.settings.mode?-reset.left:-reset.top,params={resetValue:resetValue};setPositionProperty(animateProperty,"ticker",speed,params)},initTouch=function(){slider.touch={start:{x:0,y:0},end:{x:0,y:0}},slider.viewport.bind("touchstart",onTouchStart)},onTouchStart=function(e){if(slider.working)e.preventDefault();else{slider.touch.originalPos=el.position();var orig=e.originalEvent;slider.touch.start.x=orig.changedTouches[0].pageX,slider.touch.start.y=orig.changedTouches[0].pageY,slider.viewport.bind("touchmove",onTouchMove),slider.viewport.bind("touchend",onTouchEnd)}},onTouchMove=function(e){var orig=e.originalEvent,xMovement=Math.abs(orig.changedTouches[0].pageX-slider.touch.start.x),yMovement=Math.abs(orig.changedTouches[0].pageY-slider.touch.start.y);if(3*xMovement>yMovement&&slider.settings.preventDefaultSwipeX?e.preventDefault():3*yMovement>xMovement&&slider.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=slider.settings.mode&&slider.settings.oneToOneTouch){var value=0;if("horizontal"==slider.settings.mode){var change=orig.changedTouches[0].pageX-slider.touch.start.x;value=slider.touch.originalPos.left+change}else{var change=orig.changedTouches[0].pageY-slider.touch.start.y;value=slider.touch.originalPos.top+change}setPositionProperty(value,"reset",0)}},onTouchEnd=function(e){slider.viewport.unbind("touchmove",onTouchMove);var orig=e.originalEvent,value=0;if(slider.touch.end.x=orig.changedTouches[0].pageX,slider.touch.end.y=orig.changedTouches[0].pageY,"fade"==slider.settings.mode){var distance=Math.abs(slider.touch.start.x-slider.touch.end.x);distance>=slider.settings.swipeThreshold&&(slider.touch.start.x>slider.touch.end.x?el.goToNextSlide():el.goToPrevSlide(),el.stopAuto())}else{var distance=0;"horizontal"==slider.settings.mode?(distance=slider.touch.end.x-slider.touch.start.x,value=slider.touch.originalPos.left):(distance=slider.touch.end.y-slider.touch.start.y,value=slider.touch.originalPos.top),!slider.settings.infiniteLoop&&(0==slider.active.index&&distance>0||slider.active.last&&0>distance)?setPositionProperty(value,"reset",200):Math.abs(distance)>=slider.settings.swipeThreshold?(0>distance?el.goToNextSlide():el.goToPrevSlide(),el.stopAuto()):setPositionProperty(value,"reset",200)}slider.viewport.unbind("touchend",onTouchEnd)},resizeWindow=function(){var windowWidthNew=$(window).width(),windowHeightNew=$(window).height();(windowWidth!=windowWidthNew||windowHeight!=windowHeightNew)&&(windowWidth=windowWidthNew,windowHeight=windowHeightNew,el.redrawSlider())};return el.goToSlide=function(slideIndex,direction){if(!slider.working&&slider.active.index!=slideIndex)if(slider.working=!0,slider.oldIndex=slider.active.index,slider.active.index=0>slideIndex?getPagerQty()-1:slideIndex>=getPagerQty()?0:slideIndex,slider.settings.onSlideBefore(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index),"next"==direction?slider.settings.onSlideNext(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index):"prev"==direction&&slider.settings.onSlidePrev(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index),slider.active.last=slider.active.index>=getPagerQty()-1,slider.settings.pager&&updatePagerActive(slider.active.index),slider.settings.controls&&updateDirectionControls(),"fade"==slider.settings.mode)slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()&&slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed),slider.children.filter(":visible").fadeOut(slider.settings.speed).css({zIndex:0}),slider.children.eq(slider.active.index).css("zIndex",51).fadeIn(slider.settings.speed,function(){$(this).css("zIndex",50),updateAfterSlideTransition()});else{slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight()&&slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);var moveBy=0,position={left:0,top:0};if(!slider.settings.infiniteLoop&&slider.carousel&&slider.active.last)if("horizontal"==slider.settings.mode){var lastChild=slider.children.eq(slider.children.length-1);position=lastChild.position(),moveBy=slider.viewport.width()-lastChild.outerWidth()}else{var lastShowingIndex=slider.children.length-slider.settings.minSlides;position=slider.children.eq(lastShowingIndex).position()}else if(slider.carousel&&slider.active.last&&"prev"==direction){var eq=1==slider.settings.moveSlides?slider.settings.maxSlides-getMoveBy():(getPagerQty()-1)*getMoveBy()-(slider.children.length-slider.settings.maxSlides),lastChild=el.children(".bx-clone").eq(eq);position=lastChild.position()}else if("next"==direction&&0==slider.active.index)position=el.find("> .bx-clone").eq(slider.settings.maxSlides).position(),slider.active.last=!1;else if(slideIndex>=0){var requestEl=slideIndex*getMoveBy();position=slider.children.eq(requestEl).position()}if("undefined"!=typeof position){var value="horizontal"==slider.settings.mode?-(position.left-moveBy):-position.top;setPositionProperty(value,"slide",slider.settings.speed)}}},el.goToNextSlide=function(){if(slider.settings.infiniteLoop||!slider.active.last){var pagerIndex=parseInt(slider.active.index)+1;el.goToSlide(pagerIndex,"next")}},el.goToPrevSlide=function(){if(slider.settings.infiniteLoop||0!=slider.active.index){var pagerIndex=parseInt(slider.active.index)-1;el.goToSlide(pagerIndex,"prev")}},el.startAuto=function(preventControlUpdate){slider.interval||(slider.interval=setInterval(function(){"next"==slider.settings.autoDirection?el.goToNextSlide():el.goToPrevSlide()},slider.settings.pause),slider.settings.autoControls&&1!=preventControlUpdate&&updateAutoControls("stop"))},el.stopAuto=function(preventControlUpdate){slider.interval&&(clearInterval(slider.interval),slider.interval=null,slider.settings.autoControls&&1!=preventControlUpdate&&updateAutoControls("start"))},el.getCurrentSlide=function(){return slider.active.index},el.getSlideCount=function(){return slider.children.length},el.redrawSlider=function(){slider.children.add(el.find(".bx-clone")).outerWidth(getSlideWidth()),slider.viewport.css("height",getViewportHeight()),slider.settings.ticker||setSlidePosition(),slider.active.last&&(slider.active.index=getPagerQty()-1),slider.active.index>=getPagerQty()&&(slider.active.last=!0),slider.settings.pager&&!slider.settings.pagerCustom&&(populatePager(),updatePagerActive(slider.active.index))},el.destroySlider=function(){slider.initialized&&(slider.initialized=!1,$(".bx-clone",this).remove(),slider.children.each(function(){void 0!=$(this).data("origStyle")?$(this).attr("style",$(this).data("origStyle")):$(this).removeAttr("style")}),void 0!=$(this).data("origStyle")?this.attr("style",$(this).data("origStyle")):$(this).removeAttr("style"),$(this).unwrap().unwrap(),slider.controls.el&&slider.controls.el.remove(),slider.controls.next&&slider.controls.next.remove(),slider.controls.prev&&slider.controls.prev.remove(),slider.pagerEl&&slider.pagerEl.remove(),$(".bx-caption",this).remove(),slider.controls.autoEl&&slider.controls.autoEl.remove(),clearInterval(slider.interval),slider.settings.responsive&&$(window).unbind("resize",resizeWindow))},el.reloadSlider=function(settings){void 0!=settings&&(options=settings),el.destroySlider(),init()},init(),this}}(jQuery);/*!
 * MediaElement.js
 * HTML5 <video> and <audio> shim and player
 * http://mediaelementjs.com/
 *
 * Creates a JavaScript object that mimics HTML5 MediaElement API
 * for browsers that don't understand HTML5 or can't play the provided codec
 * Can play MP4 (H.264), Ogg, WebM, FLV, WMV, WMA, ACC, and MP3
 *
 * Copyright 2010-2013, John Dyer (http://j.hn)
 * License: MIT
 *
 */
var mejs=mejs||{};mejs.version="2.13.1",mejs.meIndex=0,mejs.plugins={silverlight:[{version:[3,0],types:["video/mp4","video/m4v","video/mov","video/wmv","audio/wma","audio/m4a","audio/mp3","audio/wav","audio/mpeg"]}],flash:[{version:[9,0,124],types:["video/mp4","video/m4v","video/mov","video/flv","video/rtmp","video/x-flv","audio/flv","audio/x-flv","audio/mp3","audio/m4a","audio/mpeg","video/youtube","video/x-youtube"]}],youtube:[{version:null,types:["video/youtube","video/x-youtube","audio/youtube","audio/x-youtube"]}],vimeo:[{version:null,types:["video/vimeo","video/x-vimeo"]}]},mejs.Utility={encodeUrl:function(url){return encodeURIComponent(url)},escapeHTML:function(s){return s.toString().split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")},absolutizeUrl:function(url){var el=document.createElement("div");return el.innerHTML='<a href="'+this.escapeHTML(url)+'">x</a>',el.firstChild.href},getScriptPath:function(scriptNames){for(var j,slashPos,filenamePos,scriptUrl,scriptPath,scriptFilename,i=0,codePath="",testname="",scripts=document.getElementsByTagName("script"),il=scripts.length,jl=scriptNames.length;il>i;i++){for(scriptUrl=scripts[i].src,slashPos=scriptUrl.lastIndexOf("/"),slashPos>-1?(scriptFilename=scriptUrl.substring(slashPos+1),scriptPath=scriptUrl.substring(0,slashPos+1)):(scriptFilename=scriptUrl,scriptPath=""),j=0;jl>j;j++)if(testname=scriptNames[j],filenamePos=scriptFilename.indexOf(testname),filenamePos>-1){codePath=scriptPath;break}if(""!==codePath)break}return codePath},secondsToTimeCode:function(time,forceHours,showFrameCount,fps){"undefined"==typeof showFrameCount?showFrameCount=!1:"undefined"==typeof fps&&(fps=25);var hours=Math.floor(time/3600)%24,minutes=Math.floor(time/60)%60,seconds=Math.floor(time%60),frames=Math.floor((time%1*fps).toFixed(3)),result=(forceHours||hours>0?(10>hours?"0"+hours:hours)+":":"")+(10>minutes?"0"+minutes:minutes)+":"+(10>seconds?"0"+seconds:seconds)+(showFrameCount?":"+(10>frames?"0"+frames:frames):"");return result},timeCodeToSeconds:function(hh_mm_ss_ff,forceHours,showFrameCount,fps){"undefined"==typeof showFrameCount?showFrameCount=!1:"undefined"==typeof fps&&(fps=25);var tc_array=hh_mm_ss_ff.split(":"),tc_hh=parseInt(tc_array[0],10),tc_mm=parseInt(tc_array[1],10),tc_ss=parseInt(tc_array[2],10),tc_ff=0,tc_in_seconds=0;return showFrameCount&&(tc_ff=parseInt(tc_array[3])/fps),tc_in_seconds=3600*tc_hh+60*tc_mm+tc_ss+tc_ff},convertSMPTEtoSeconds:function(SMPTE){if("string"!=typeof SMPTE)return!1;SMPTE=SMPTE.replace(",",".");var secs=0,decimalLen=-1!=SMPTE.indexOf(".")?SMPTE.split(".")[1].length:0,multiplier=1;SMPTE=SMPTE.split(":").reverse();for(var i=0;i<SMPTE.length;i++)multiplier=1,i>0&&(multiplier=Math.pow(60,i)),secs+=Number(SMPTE[i])*multiplier;return Number(secs.toFixed(decimalLen))},removeSwf:function(id){var obj=document.getElementById(id);obj&&/object|embed/i.test(obj.nodeName)&&(mejs.MediaFeatures.isIE?(obj.style.display="none",function(){4==obj.readyState?mejs.Utility.removeObjectInIE(id):setTimeout(arguments.callee,10)}()):obj.parentNode.removeChild(obj))},removeObjectInIE:function(id){var obj=document.getElementById(id);if(obj){for(var i in obj)"function"==typeof obj[i]&&(obj[i]=null);obj.parentNode.removeChild(obj)}}},mejs.PluginDetector={hasPluginVersion:function(plugin,v){var pv=this.plugins[plugin];return v[1]=v[1]||0,v[2]=v[2]||0,pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?!0:!1},nav:window.navigator,ua:window.navigator.userAgent.toLowerCase(),plugins:[],addPlugin:function(p,pluginName,mimeType,activeX,axDetect){this.plugins[p]=this.detectPlugin(pluginName,mimeType,activeX,axDetect)},detectPlugin:function(pluginName,mimeType,activeX,axDetect){var description,i,ax,version=[0,0,0];if("undefined"!=typeof this.nav.plugins&&"object"==typeof this.nav.plugins[pluginName]){if(description=this.nav.plugins[pluginName].description,description&&("undefined"==typeof this.nav.mimeTypes||!this.nav.mimeTypes[mimeType]||this.nav.mimeTypes[mimeType].enabledPlugin))for(version=description.replace(pluginName,"").replace(/^\s+/,"").replace(/\sr/gi,".").split("."),i=0;i<version.length;i++)version[i]=parseInt(version[i].match(/\d+/),10)}else if("undefined"!=typeof window.ActiveXObject)try{ax=new ActiveXObject(activeX),ax&&(version=axDetect(ax))}catch(e){}return version}},mejs.PluginDetector.addPlugin("flash","Shockwave Flash","application/x-shockwave-flash","ShockwaveFlash.ShockwaveFlash",function(ax){var version=[],d=ax.GetVariable("$version");return d&&(d=d.split(" ")[1].split(","),version=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]),version}),mejs.PluginDetector.addPlugin("silverlight","Silverlight Plug-In","application/x-silverlight-2","AgControl.AgControl",function(ax){var v=[0,0,0,0],loopMatch=function(ax,v,i,n){for(;ax.isVersionSupported(v[0]+"."+v[1]+"."+v[2]+"."+v[3]);)v[i]+=n;v[i]-=n};return loopMatch(ax,v,0,1),loopMatch(ax,v,1,1),loopMatch(ax,v,2,1e4),loopMatch(ax,v,2,1e3),loopMatch(ax,v,2,100),loopMatch(ax,v,2,10),loopMatch(ax,v,2,1),loopMatch(ax,v,3,1),v}),mejs.MediaFeatures={init:function(){var i,v,t=this,d=document,nav=mejs.PluginDetector.nav,ua=mejs.PluginDetector.ua.toLowerCase(),html5Elements=["source","track","audio","video"];t.isiPad=null!==ua.match(/ipad/i),t.isiPhone=null!==ua.match(/iphone/i),t.isiOS=t.isiPhone||t.isiPad,t.isAndroid=null!==ua.match(/android/i),t.isBustedAndroid=null!==ua.match(/android 2\.[12]/),t.isBustedNativeHTTPS="https:"===location.protocol&&(null!==ua.match(/android [12]\./)||null!==ua.match(/macintosh.* version.* safari/)),t.isIE=null!==nav.appName.toLowerCase().match(/trident/gi),t.isChrome=null!==ua.match(/chrome/gi),t.isFirefox=null!==ua.match(/firefox/gi),t.isWebkit=null!==ua.match(/webkit/gi),t.isGecko=null!==ua.match(/gecko/gi)&&!t.isWebkit&&!t.isIE,t.isOpera=null!==ua.match(/opera/gi),t.hasTouch="ontouchstart"in window&&null!=window.ontouchstart,t.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;for(i=0;i<html5Elements.length;i++)v=document.createElement(html5Elements[i]);t.supportsMediaTag="undefined"!=typeof v.canPlayType||t.isBustedAndroid;try{v.canPlayType("video/mp4")}catch(e){t.supportsMediaTag=!1}t.hasSemiNativeFullScreen="undefined"!=typeof v.webkitEnterFullscreen,t.hasNativeFullscreen="undefined"!=typeof v.requestFullscreen,t.hasWebkitNativeFullScreen="undefined"!=typeof v.webkitRequestFullScreen,t.hasMozNativeFullScreen="undefined"!=typeof v.mozRequestFullScreen,t.hasMsNativeFullScreen="undefined"!=typeof v.msRequestFullscreen,t.hasTrueNativeFullScreen=t.hasWebkitNativeFullScreen||t.hasMozNativeFullScreen||t.hasMsNativeFullScreen,t.nativeFullScreenEnabled=t.hasTrueNativeFullScreen,t.hasMozNativeFullScreen?t.nativeFullScreenEnabled=document.mozFullScreenEnabled:t.hasMsNativeFullScreen&&(t.nativeFullScreenEnabled=document.msFullscreenEnabled),t.isChrome&&(t.hasSemiNativeFullScreen=!1),t.hasTrueNativeFullScreen&&(t.fullScreenEventName="",t.hasWebkitNativeFullScreen?t.fullScreenEventName="webkitfullscreenchange":t.hasMozNativeFullScreen?t.fullScreenEventName="mozfullscreenchange":t.hasMsNativeFullScreen&&(t.fullScreenEventName="MSFullscreenChange"),t.isFullScreen=function(){return v.mozRequestFullScreen?d.mozFullScreen:v.webkitRequestFullScreen?d.webkitIsFullScreen:v.hasMsNativeFullScreen?null!==d.msFullscreenElement:void 0},t.requestFullScreen=function(el){t.hasWebkitNativeFullScreen?el.webkitRequestFullScreen():t.hasMozNativeFullScreen?el.mozRequestFullScreen():t.hasMsNativeFullScreen&&el.msRequestFullscreen()},t.cancelFullScreen=function(){t.hasWebkitNativeFullScreen?document.webkitCancelFullScreen():t.hasMozNativeFullScreen?document.mozCancelFullScreen():t.hasMsNativeFullScreen&&document.msExitFullscreen()}),t.hasSemiNativeFullScreen&&ua.match(/mac os x 10_5/i)&&(t.hasNativeFullScreen=!1,t.hasSemiNativeFullScreen=!1)}},mejs.MediaFeatures.init(),mejs.HtmlMediaElement={pluginType:"native",isFullScreen:!1,setCurrentTime:function(time){this.currentTime=time},setMuted:function(muted){this.muted=muted},setVolume:function(volume){this.volume=volume},stop:function(){this.pause()},setSrc:function(url){for(var existingSources=this.getElementsByTagName("source");existingSources.length>0;)this.removeChild(existingSources[0]);if("string"==typeof url)this.src=url;else{var i,media;for(i=0;i<url.length;i++)if(media=url[i],this.canPlayType(media.type)){this.src=media.src;break}}},setVideoSize:function(width,height){this.width=width,this.height=height}},mejs.PluginMediaElement=function(pluginid,pluginType,mediaUrl){this.id=pluginid,this.pluginType=pluginType,this.src=mediaUrl,this.events={},this.attributes={}},mejs.PluginMediaElement.prototype={pluginElement:null,pluginType:"",isFullScreen:!1,playbackRate:-1,defaultPlaybackRate:-1,seekable:[],played:[],paused:!0,ended:!1,seeking:!1,duration:0,error:null,tagName:"",muted:!1,volume:1,currentTime:0,play:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.playVideo():this.pluginApi.playMedia(),this.paused=!1)},load:function(){null!=this.pluginApi&&("youtube"==this.pluginType||this.pluginApi.loadMedia(),this.paused=!1)},pause:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.pauseVideo():this.pluginApi.pauseMedia(),this.paused=!0)},stop:function(){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.stopVideo():this.pluginApi.stopMedia(),this.paused=!0)},canPlayType:function(type){var i,j,pluginInfo,pluginVersions=mejs.plugins[this.pluginType];for(i=0;i<pluginVersions.length;i++)if(pluginInfo=pluginVersions[i],mejs.PluginDetector.hasPluginVersion(this.pluginType,pluginInfo.version))for(j=0;j<pluginInfo.types.length;j++)if(type==pluginInfo.types[j])return"probably";return""},positionFullscreenButton:function(x,y,visibleAndAbove){null!=this.pluginApi&&this.pluginApi.positionFullscreenButton&&this.pluginApi.positionFullscreenButton(Math.floor(x),Math.floor(y),visibleAndAbove)},hideFullscreenButton:function(){null!=this.pluginApi&&this.pluginApi.hideFullscreenButton&&this.pluginApi.hideFullscreenButton()},setSrc:function(url){if("string"==typeof url)this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(url)),this.src=mejs.Utility.absolutizeUrl(url);else{var i,media;for(i=0;i<url.length;i++)if(media=url[i],this.canPlayType(media.type)){this.pluginApi.setSrc(mejs.Utility.absolutizeUrl(media.src)),this.src=mejs.Utility.absolutizeUrl(url);break}}},setCurrentTime:function(time){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.seekTo(time):this.pluginApi.setCurrentTime(time),this.currentTime=time)},setVolume:function(volume){null!=this.pluginApi&&("youtube"==this.pluginType?this.pluginApi.setVolume(100*volume):this.pluginApi.setVolume(volume),this.volume=volume)},setMuted:function(muted){null!=this.pluginApi&&("youtube"==this.pluginType?(muted?this.pluginApi.mute():this.pluginApi.unMute(),this.muted=muted,this.dispatchEvent("volumechange")):this.pluginApi.setMuted(muted),this.muted=muted)},setVideoSize:function(width,height){this.pluginElement&&this.pluginElement.style&&(this.pluginElement.style.width=width+"px",this.pluginElement.style.height=height+"px"),null!=this.pluginApi&&this.pluginApi.setVideoSize&&this.pluginApi.setVideoSize(width,height)},setFullscreen:function(fullscreen){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.pluginApi.setFullscreen(fullscreen)},enterFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!0)},exitFullScreen:function(){null!=this.pluginApi&&this.pluginApi.setFullscreen&&this.setFullscreen(!1)},addEventListener:function(eventName,callback){this.events[eventName]=this.events[eventName]||[],this.events[eventName].push(callback)},removeEventListener:function(eventName,callback){if(!eventName)return this.events={},!0;var callbacks=this.events[eventName];if(!callbacks)return!0;if(!callback)return this.events[eventName]=[],!0;for(i=0;i<callbacks.length;i++)if(callbacks[i]===callback)return this.events[eventName].splice(i,1),!0;return!1},dispatchEvent:function(eventName){var i,args,callbacks=this.events[eventName];if(callbacks)for(args=Array.prototype.slice.call(arguments,1),i=0;i<callbacks.length;i++)callbacks[i].apply(null,args)},hasAttribute:function(name){return name in this.attributes},removeAttribute:function(name){delete this.attributes[name]},getAttribute:function(name){return this.hasAttribute(name)?this.attributes[name]:""},setAttribute:function(name,value){this.attributes[name]=value},remove:function(){mejs.Utility.removeSwf(this.pluginElement.id),mejs.MediaPluginBridge.unregisterPluginElement(this.pluginElement.id)}},mejs.MediaPluginBridge={pluginMediaElements:{},htmlMediaElements:{},registerPluginElement:function(id,pluginMediaElement,htmlMediaElement){this.pluginMediaElements[id]=pluginMediaElement,this.htmlMediaElements[id]=htmlMediaElement},unregisterPluginElement:function(id){delete this.pluginMediaElements[id],delete this.htmlMediaElements[id]},initPlugin:function(id){var pluginMediaElement=this.pluginMediaElements[id],htmlMediaElement=this.htmlMediaElements[id];if(pluginMediaElement){switch(pluginMediaElement.pluginType){case"flash":pluginMediaElement.pluginElement=pluginMediaElement.pluginApi=document.getElementById(id);break;case"silverlight":pluginMediaElement.pluginElement=document.getElementById(pluginMediaElement.id),pluginMediaElement.pluginApi=pluginMediaElement.pluginElement.Content.MediaElementJS}null!=pluginMediaElement.pluginApi&&pluginMediaElement.success&&pluginMediaElement.success(pluginMediaElement,htmlMediaElement)}},fireEvent:function(id,eventName,values){var e,i,bufferedTime,pluginMediaElement=this.pluginMediaElements[id];if(pluginMediaElement){e={type:eventName,target:pluginMediaElement};for(i in values)pluginMediaElement[i]=values[i],e[i]=values[i];bufferedTime=values.bufferedTime||0,e.target.buffered=e.buffered={start:function(){return 0},end:function(){return bufferedTime},length:1},pluginMediaElement.dispatchEvent(e.type,e)}}},mejs.MediaElementDefaults={mode:"auto",plugins:["flash","silverlight","youtube","vimeo"],enablePluginDebug:!1,httpsBasicAuthSite:!1,type:"",pluginPath:mejs.Utility.getScriptPath(["mediaelement.js","mediaelement.min.js","mediaelement-and-player.js","mediaelement-and-player.min.js"]),flashName:"flashmediaelement.swf",flashStreamer:"",enablePluginSmoothing:!1,enablePseudoStreaming:!1,pseudoStreamingStartQueryParam:"start",silverlightName:"silverlightmediaelement.xap",defaultVideoWidth:480,defaultVideoHeight:270,pluginWidth:-1,pluginHeight:-1,pluginVars:[],timerRate:250,startVolume:.8,success:function(){},error:function(){}},mejs.MediaElement=function(el,o){return mejs.HtmlMediaElementShim.create(el,o)},mejs.HtmlMediaElementShim={create:function(el,o){var playback,prop,options=mejs.MediaElementDefaults,htmlMediaElement="string"==typeof el?document.getElementById(el):el,tagName=htmlMediaElement.tagName.toLowerCase(),isMediaTag="audio"===tagName||"video"===tagName,src=isMediaTag?htmlMediaElement.getAttribute("src"):htmlMediaElement.getAttribute("href"),poster=htmlMediaElement.getAttribute("poster"),autoplay=htmlMediaElement.getAttribute("autoplay"),preload=htmlMediaElement.getAttribute("preload"),controls=htmlMediaElement.getAttribute("controls");for(prop in o)options[prop]=o[prop];return src="undefined"==typeof src||null===src||""==src?null:src,poster="undefined"==typeof poster||null===poster?"":poster,preload="undefined"==typeof preload||null===preload||"false"===preload?"none":preload,autoplay=!("undefined"==typeof autoplay||null===autoplay||"false"===autoplay),controls=!("undefined"==typeof controls||null===controls||"false"===controls),playback=this.determinePlayback(htmlMediaElement,options,mejs.MediaFeatures.supportsMediaTag,isMediaTag,src),playback.url=null!==playback.url?mejs.Utility.absolutizeUrl(playback.url):"","native"==playback.method?(mejs.MediaFeatures.isBustedAndroid&&(htmlMediaElement.src=playback.url,htmlMediaElement.addEventListener("click",function(){htmlMediaElement.play()},!1)),this.updateNative(playback,options,autoplay,preload)):""!==playback.method?this.createPlugin(playback,options,poster,autoplay,preload,controls):(this.createErrorMessage(playback,options,poster),this)},determinePlayback:function(htmlMediaElement,options,supportsMediaTag,isMediaTag,src){var i,j,k,l,n,type,pluginName,pluginVersions,pluginInfo,dummy,media,mediaFiles=[],result={method:"",url:"",htmlMediaElement:htmlMediaElement,isVideo:"audio"!=htmlMediaElement.tagName.toLowerCase()};if("undefined"!=typeof options.type&&""!==options.type)if("string"==typeof options.type)mediaFiles.push({type:options.type,url:src});else for(i=0;i<options.type.length;i++)mediaFiles.push({type:options.type[i],url:src});else if(null!==src)type=this.formatType(src,htmlMediaElement.getAttribute("type")),mediaFiles.push({type:type,url:src});else for(i=0;i<htmlMediaElement.childNodes.length;i++)n=htmlMediaElement.childNodes[i],1==n.nodeType&&"source"==n.tagName.toLowerCase()&&(src=n.getAttribute("src"),type=this.formatType(src,n.getAttribute("type")),media=n.getAttribute("media"),(!media||!window.matchMedia||window.matchMedia&&window.matchMedia(media).matches)&&mediaFiles.push({type:type,url:src}));if(!isMediaTag&&mediaFiles.length>0&&null!==mediaFiles[0].url&&this.getTypeFromFile(mediaFiles[0].url).indexOf("audio")>-1&&(result.isVideo=!1),mejs.MediaFeatures.isBustedAndroid&&(htmlMediaElement.canPlayType=function(type){return null!==type.match(/video\/(mp4|m4v)/gi)?"maybe":""}),!(!supportsMediaTag||"auto"!==options.mode&&"auto_plugin"!==options.mode&&"native"!==options.mode||mejs.MediaFeatures.isBustedNativeHTTPS&&options.httpsBasicAuthSite===!0)){for(isMediaTag||(dummy=document.createElement(result.isVideo?"video":"audio"),htmlMediaElement.parentNode.insertBefore(dummy,htmlMediaElement),htmlMediaElement.style.display="none",result.htmlMediaElement=htmlMediaElement=dummy),i=0;i<mediaFiles.length;i++)if(""!==htmlMediaElement.canPlayType(mediaFiles[i].type).replace(/no/,"")||""!==htmlMediaElement.canPlayType(mediaFiles[i].type.replace(/mp3/,"mpeg")).replace(/no/,"")){result.method="native",result.url=mediaFiles[i].url;break}if("native"===result.method&&(null!==result.url&&(htmlMediaElement.src=result.url),"auto_plugin"!==options.mode))return result}if("auto"===options.mode||"auto_plugin"===options.mode||"shim"===options.mode)for(i=0;i<mediaFiles.length;i++)for(type=mediaFiles[i].type,j=0;j<options.plugins.length;j++)for(pluginName=options.plugins[j],pluginVersions=mejs.plugins[pluginName],k=0;k<pluginVersions.length;k++)if(pluginInfo=pluginVersions[k],null==pluginInfo.version||mejs.PluginDetector.hasPluginVersion(pluginName,pluginInfo.version))for(l=0;l<pluginInfo.types.length;l++)if(type==pluginInfo.types[l])return result.method=pluginName,result.url=mediaFiles[i].url,result;return"auto_plugin"===options.mode&&"native"===result.method?result:(""===result.method&&mediaFiles.length>0&&(result.url=mediaFiles[0].url),result)},formatType:function(url,type){return url&&!type?this.getTypeFromFile(url):type&&~type.indexOf(";")?type.substr(0,type.indexOf(";")):type},getTypeFromFile:function(url){url=url.split("?")[0];var ext=url.substring(url.lastIndexOf(".")+1).toLowerCase();return(/(mp4|m4v|ogg|ogv|webm|webmv|flv|wmv|mpeg|mov)/gi.test(ext)?"video":"audio")+"/"+this.getTypeFromExtension(ext)},getTypeFromExtension:function(ext){switch(ext){case"mp4":case"m4v":return"mp4";case"webm":case"webma":case"webmv":return"webm";case"ogg":case"oga":case"ogv":return"ogg";default:return ext}},createErrorMessage:function(playback,options,poster){var htmlMediaElement=playback.htmlMediaElement,errorContainer=document.createElement("div");errorContainer.className="me-cannotplay";try{errorContainer.style.width=htmlMediaElement.width+"px",errorContainer.style.height=htmlMediaElement.height+"px"}catch(e){}errorContainer.innerHTML=options.customError?options.customError:""!==poster?'<a href="'+playback.url+'"><img src="'+poster+'" width="100%" height="100%" /></a>':'<a href="'+playback.url+'"><span>'+mejs.i18n.t("Download File")+"</span></a>",htmlMediaElement.parentNode.insertBefore(errorContainer,htmlMediaElement),htmlMediaElement.style.display="none",options.error(htmlMediaElement)},createPlugin:function(playback,options,poster,autoplay,preload,controls){var specialIEContainer,node,initVars,htmlMediaElement=playback.htmlMediaElement,width=1,height=1,pluginid="me_"+playback.method+"_"+mejs.meIndex++,pluginMediaElement=new mejs.PluginMediaElement(pluginid,playback.method,playback.url),container=document.createElement("div");pluginMediaElement.tagName=htmlMediaElement.tagName;for(var i=0;i<htmlMediaElement.attributes.length;i++){var attribute=htmlMediaElement.attributes[i];1==attribute.specified&&pluginMediaElement.setAttribute(attribute.name,attribute.value)}for(node=htmlMediaElement.parentNode;null!==node&&"body"!=node.tagName.toLowerCase();){if("p"==node.parentNode.tagName.toLowerCase()){node.parentNode.parentNode.insertBefore(node,node.parentNode);break}node=node.parentNode}switch(playback.isVideo?(width=options.pluginWidth>0?options.pluginWidth:options.videoWidth>0?options.videoWidth:null!==htmlMediaElement.getAttribute("width")?htmlMediaElement.getAttribute("width"):options.defaultVideoWidth,height=options.pluginHeight>0?options.pluginHeight:options.videoHeight>0?options.videoHeight:null!==htmlMediaElement.getAttribute("height")?htmlMediaElement.getAttribute("height"):options.defaultVideoHeight,width=mejs.Utility.encodeUrl(width),height=mejs.Utility.encodeUrl(height)):options.enablePluginDebug&&(width=320,height=240),pluginMediaElement.success=options.success,mejs.MediaPluginBridge.registerPluginElement(pluginid,pluginMediaElement,htmlMediaElement),container.className="me-plugin",container.id=pluginid+"_container",playback.isVideo?htmlMediaElement.parentNode.insertBefore(container,htmlMediaElement):document.body.insertBefore(container,document.body.childNodes[0]),initVars=["id="+pluginid,"isvideo="+(playback.isVideo?"true":"false"),"autoplay="+(autoplay?"true":"false"),"preload="+preload,"width="+width,"startvolume="+options.startVolume,"timerrate="+options.timerRate,"flashstreamer="+options.flashStreamer,"height="+height,"pseudostreamstart="+options.pseudoStreamingStartQueryParam],null!==playback.url&&("flash"==playback.method?initVars.push("file="+mejs.Utility.encodeUrl(playback.url)):initVars.push("file="+playback.url)),options.enablePluginDebug&&initVars.push("debug=true"),options.enablePluginSmoothing&&initVars.push("smoothing=true"),options.enablePseudoStreaming&&initVars.push("pseudostreaming=true"),controls&&initVars.push("controls=true"),options.pluginVars&&(initVars=initVars.concat(options.pluginVars)),playback.method){case"silverlight":container.innerHTML='<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" id="'+pluginid+'" name="'+pluginid+'" width="'+width+'" height="'+height+'" class="mejs-shim"><param name="initParams" value="'+initVars.join(",")+'" /><param name="windowless" value="true" /><param name="background" value="black" /><param name="minRuntimeVersion" value="3.0.0.0" /><param name="autoUpgrade" value="true" /><param name="source" value="'+options.pluginPath+options.silverlightName+'" /></object>';break;case"flash":mejs.MediaFeatures.isIE?(specialIEContainer=document.createElement("div"),container.appendChild(specialIEContainer),specialIEContainer.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+pluginid+'" width="'+width+'" height="'+height+'" class="mejs-shim"><param name="movie" value="'+options.pluginPath+options.flashName+"?x="+new Date+'" /><param name="flashvars" value="'+initVars.join("&amp;")+'" /><param name="quality" value="high" /><param name="bgcolor" value="#000000" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):container.innerHTML='<embed id="'+pluginid+'" name="'+pluginid+'" play="true" loop="false" quality="high" bgcolor="#000000" wmode="transparent" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="//www.macromedia.com/go/getflashplayer" src="'+options.pluginPath+options.flashName+'" flashvars="'+initVars.join("&")+'" width="'+width+'" height="'+height+'" class="mejs-shim"></embed>';break;case"youtube":width=decodeURIComponent(width),height=decodeURIComponent(height);var videoId=playback.url.substr(playback.url.lastIndexOf("=")+1);youtubeSettings={container:container,containerId:container.id,pluginMediaElement:pluginMediaElement,pluginId:pluginid,videoId:videoId,height:height,width:width},mejs.PluginDetector.hasPluginVersion("flash",[10,0,0])?mejs.YouTubeApi.createFlash(youtubeSettings):mejs.YouTubeApi.enqueueIframe(youtubeSettings);break;case"vimeo":pluginMediaElement.vimeoid=playback.url.substr(playback.url.lastIndexOf("/")+1),container.innerHTML='<iframe src="http://player.vimeo.com/video/'+pluginMediaElement.vimeoid+'?portrait=0&byline=0&title=0" width="'+width+'" height="'+height+'" frameborder="0" class="mejs-shim"></iframe>'}return htmlMediaElement.style.display="none",htmlMediaElement.removeAttribute("autoplay"),pluginMediaElement},updateNative:function(playback,options){var m,htmlMediaElement=playback.htmlMediaElement;for(m in mejs.HtmlMediaElement)htmlMediaElement[m]=mejs.HtmlMediaElement[m];return options.success(htmlMediaElement,htmlMediaElement),htmlMediaElement}},mejs.YouTubeApi={isIframeStarted:!1,isIframeLoaded:!1,loadIframeApi:function(){if(!this.isIframeStarted){var tag=document.createElement("script");tag.src="//www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),this.isIframeStarted=!0}},iframeQueue:[],enqueueIframe:function(yt){this.isLoaded?this.createIframe(yt):(this.loadIframeApi(),this.iframeQueue.push(yt))},createIframe:function(settings){var pluginMediaElement=settings.pluginMediaElement,player=new YT.Player(settings.containerId,{height:settings.height,width:settings.width,videoId:settings.videoId,playerVars:{controls:0},events:{onReady:function(){settings.pluginMediaElement.pluginApi=player,mejs.MediaPluginBridge.initPlugin(settings.pluginId),setInterval(function(){mejs.YouTubeApi.createEvent(player,pluginMediaElement,"timeupdate")},250)},onStateChange:function(e){mejs.YouTubeApi.handleStateChange(e.data,player,pluginMediaElement)}}})},createEvent:function(player,pluginMediaElement,eventName){var obj={type:eventName,target:pluginMediaElement};if(player&&player.getDuration){pluginMediaElement.currentTime=obj.currentTime=player.getCurrentTime(),pluginMediaElement.duration=obj.duration=player.getDuration(),obj.paused=pluginMediaElement.paused,obj.ended=pluginMediaElement.ended,obj.muted=player.isMuted(),obj.volume=player.getVolume()/100,obj.bytesTotal=player.getVideoBytesTotal(),obj.bufferedBytes=player.getVideoBytesLoaded();var bufferedTime=obj.bufferedBytes/obj.bytesTotal*obj.duration;obj.target.buffered=obj.buffered={start:function(){return 0},end:function(){return bufferedTime},length:1}}pluginMediaElement.dispatchEvent(obj.type,obj)},iFrameReady:function(){for(this.isLoaded=!0,this.isIframeLoaded=!0;this.iframeQueue.length>0;){var settings=this.iframeQueue.pop();this.createIframe(settings)}},flashPlayers:{},createFlash:function(settings){this.flashPlayers[settings.pluginId]=settings;var specialIEContainer,youtubeUrl="//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid="+settings.pluginId+"&amp;version=3&amp;autoplay=0&amp;controls=0&amp;modestbranding=1&loop=0";mejs.MediaFeatures.isIE?(specialIEContainer=document.createElement("div"),settings.container.appendChild(specialIEContainer),specialIEContainer.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" id="'+settings.pluginId+'" width="'+settings.width+'" height="'+settings.height+'" class="mejs-shim"><param name="movie" value="'+youtubeUrl+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /></object>'):settings.container.innerHTML='<object type="application/x-shockwave-flash" id="'+settings.pluginId+'" data="'+youtubeUrl+'" width="'+settings.width+'" height="'+settings.height+'" style="visibility: visible; " class="mejs-shim"><param name="allowScriptAccess" value="always"><param name="wmode" value="transparent"></object>'},flashReady:function(id){var settings=this.flashPlayers[id],player=document.getElementById(id),pluginMediaElement=settings.pluginMediaElement;pluginMediaElement.pluginApi=pluginMediaElement.pluginElement=player,mejs.MediaPluginBridge.initPlugin(id),player.cueVideoById(settings.videoId);var callbackName=settings.containerId+"_callback";window[callbackName]=function(e){mejs.YouTubeApi.handleStateChange(e,player,pluginMediaElement)},player.addEventListener("onStateChange",callbackName),setInterval(function(){mejs.YouTubeApi.createEvent(player,pluginMediaElement,"timeupdate")},250)},handleStateChange:function(youTubeState,player,pluginMediaElement){switch(youTubeState){case-1:pluginMediaElement.paused=!0,pluginMediaElement.ended=!0,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"loadedmetadata");break;case 0:pluginMediaElement.paused=!1,pluginMediaElement.ended=!0,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"ended");break;case 1:pluginMediaElement.paused=!1,pluginMediaElement.ended=!1,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"play"),mejs.YouTubeApi.createEvent(player,pluginMediaElement,"playing");break;case 2:pluginMediaElement.paused=!0,pluginMediaElement.ended=!1,mejs.YouTubeApi.createEvent(player,pluginMediaElement,"pause");break;case 3:mejs.YouTubeApi.createEvent(player,pluginMediaElement,"progress");break;case 5:}}},window.mejs=mejs,window.MediaElement=mejs.MediaElement,function(context,exports){"use strict";var i18n={locale:{language:"",strings:{}},methods:{}};i18n.locale.getLanguage=function(){return i18n.locale.language||navigator.language},"undefined"!=typeof mejsL10n&&(i18n.locale.language=mejsL10n.language),i18n.locale.INIT_LANGUAGE=i18n.locale.getLanguage(),i18n.methods.checkPlain=function(str){var character,regex,replace={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};str=String(str);for(character in replace)replace.hasOwnProperty(character)&&(regex=new RegExp(character,"g"),str=str.replace(regex,replace[character]));return str},i18n.methods.formatString=function(str,args){for(var key in args){switch(key.charAt(0)){case"@":args[key]=i18n.methods.checkPlain(args[key]);break;case"!":break;case"%":default:args[key]='<em class="placeholder">'+i18n.methods.checkPlain(args[key])+"</em>"}str=str.replace(key,args[key])}return str},i18n.methods.t=function(str,args,options){return i18n.locale.strings&&i18n.locale.strings[options.context]&&i18n.locale.strings[options.context][str]&&(str=i18n.locale.strings[options.context][str]),args&&(str=i18n.methods.formatString(str,args)),str},i18n.t=function(str,args,options){if("string"==typeof str&&str.length>0){var language=i18n.locale.getLanguage();return options=options||{context:language},i18n.methods.t(str,args,options)}throw{name:"InvalidArgumentException",message:"First argument is either not a string or empty."}},exports.i18n=i18n}(document,mejs),function(exports){"use strict";"undefined"!=typeof mejsL10n&&(exports[mejsL10n.language]=mejsL10n.strings)}(mejs.i18n.locale.strings),function(exports){"use strict";exports.de={Fullscreen:"Vollbild","Go Fullscreen":"Vollbild an","Turn off Fullscreen":"Vollbild aus",Close:"Schließen"}}(mejs.i18n.locale.strings),function(exports){"use strict";exports.zh={Fullscreen:"全螢幕","Go Fullscreen":"全屏模式","Turn off Fullscreen":"退出全屏模式",Close:"關閉"}}(mejs.i18n.locale.strings),/*!
 * MediaElementPlayer
 * http://mediaelementjs.com/
 *
 * Creates a controller bar for HTML5 <video> add <audio> tags
 * using jQuery and MediaElement.js (HTML5 Flash/Silverlight wrapper)
 *
 * Copyright 2010-2013, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
"undefined"!=typeof jQuery?mejs.$=jQuery:"undefined"!=typeof ender&&(mejs.$=ender),function($){mejs.MepDefaults={poster:"",showPosterWhenEnded:!1,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(media){return.05*media.duration},defaultSeekForwardInterval:function(media){return.05*media.duration},audioWidth:-1,audioHeight:-1,startVolume:.8,loop:!1,autoRewind:!0,enableAutosize:!0,alwaysShowHours:!1,showTimecodeFrameCount:!1,framesPerSecond:25,autosizeProgress:!0,alwaysShowControls:!1,hideVideoControlsOnLoad:!1,clickToPlayPause:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:!0,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[{keys:[32,179],action:function(player,media){media.paused||media.ended?media.play():media.pause()}},{keys:[38],action:function(player,media){var newVolume=Math.min(media.volume+.1,1);media.setVolume(newVolume)}},{keys:[40],action:function(player,media){var newVolume=Math.max(media.volume-.1,0);media.setVolume(newVolume)}},{keys:[37,227],action:function(player,media){if(!isNaN(media.duration)&&media.duration>0){player.isVideo&&(player.showControls(),player.startControlsTimer());var newTime=Math.max(media.currentTime-player.options.defaultSeekBackwardInterval(media),0);media.setCurrentTime(newTime)}}},{keys:[39,228],action:function(player,media){if(!isNaN(media.duration)&&media.duration>0){player.isVideo&&(player.showControls(),player.startControlsTimer());var newTime=Math.min(media.currentTime+player.options.defaultSeekForwardInterval(media),media.duration);media.setCurrentTime(newTime)}}},{keys:[70],action:function(player){"undefined"!=typeof player.enterFullScreen&&(player.isFullScreen?player.exitFullScreen():player.enterFullScreen())}}]},mejs.mepIndex=0,mejs.players={},mejs.MediaElementPlayer=function(node,o){if(!(this instanceof mejs.MediaElementPlayer))return new mejs.MediaElementPlayer(node,o);var t=this;return t.$media=t.$node=$(node),t.node=t.media=t.$media[0],"undefined"!=typeof t.node.player?t.node.player:(t.node.player=t,"undefined"==typeof o&&(o=t.$node.data("mejsoptions")),t.options=$.extend({},mejs.MepDefaults,o),t.id="mep_"+mejs.mepIndex++,mejs.players[t.id]=t,t.init(),t)},mejs.MediaElementPlayer.prototype={hasFocus:!1,controlsAreVisible:!0,init:function(){var t=this,mf=mejs.MediaFeatures,meOptions=$.extend(!0,{},t.options,{success:function(media,domNode){t.meReady(media,domNode)},error:function(e){t.handleError(e)}}),tagName=t.media.tagName.toLowerCase();if(t.isDynamic="audio"!==tagName&&"video"!==tagName,t.isVideo=t.isDynamic?t.options.isVideo:"audio"!==tagName&&t.options.isVideo,mf.isiPad&&t.options.iPadUseNativeControls||mf.isiPhone&&t.options.iPhoneUseNativeControls)t.$media.attr("controls","controls"),mf.isiPad&&null!==t.media.getAttribute("autoplay")&&(t.media.load(),t.media.play());else if(mf.isAndroid&&t.options.AndroidUseNativeControls);else{if(t.$media.removeAttr("controls"),t.container=$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svg?"svg":"no-svg")+'"><div class="mejs-inner"><div class="mejs-mediaelement"></div><div class="mejs-layers"></div><div class="mejs-controls"></div><div class="mejs-clear"></div></div></div>').addClass(t.$media[0].className).insertBefore(t.$media),t.container.addClass((mf.isAndroid?"mejs-android ":"")+(mf.isiOS?"mejs-ios ":"")+(mf.isiPad?"mejs-ipad ":"")+(mf.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio ")),mf.isiOS){var $newMedia=t.$media.clone();t.container.find(".mejs-mediaelement").append($newMedia),t.$media.remove(),t.$node=t.$media=$newMedia,t.node=t.media=$newMedia[0]}else t.container.find(".mejs-mediaelement").append(t.$media);t.controls=t.container.find(".mejs-controls"),t.layers=t.container.find(".mejs-layers");var tagType=t.isVideo?"video":"audio",capsTagName=tagType.substring(0,1).toUpperCase()+tagType.substring(1);t.width=t.options[tagType+"Width"]>0||t.options[tagType+"Width"].toString().indexOf("%")>-1?t.options[tagType+"Width"]:""!==t.media.style.width&&null!==t.media.style.width?t.media.style.width:null!==t.media.getAttribute("width")?t.$media.attr("width"):t.options["default"+capsTagName+"Width"],t.height=t.options[tagType+"Height"]>0||t.options[tagType+"Height"].toString().indexOf("%")>-1?t.options[tagType+"Height"]:""!==t.media.style.height&&null!==t.media.style.height?t.media.style.height:null!==t.$media[0].getAttribute("height")?t.$media.attr("height"):t.options["default"+capsTagName+"Height"],t.setPlayerSize(t.width,t.height),meOptions.pluginWidth=t.width,meOptions.pluginHeight=t.height}mejs.MediaElement(t.$media[0],meOptions),"undefined"!=typeof t.container&&t.controlsAreVisible&&t.container.trigger("controlsshown")},showControls:function(doAnimation){var t=this;doAnimation="undefined"==typeof doAnimation||doAnimation,t.controlsAreVisible||(doAnimation?(t.controls.css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0,t.container.trigger("controlsshown")}),t.container.find(".mejs-control").css("visibility","visible").stop(!0,!0).fadeIn(200,function(){t.controlsAreVisible=!0})):(t.controls.css("visibility","visible").css("display","block"),t.container.find(".mejs-control").css("visibility","visible").css("display","block"),t.controlsAreVisible=!0,t.container.trigger("controlsshown")),t.setControlsSize())},hideControls:function(doAnimation){var t=this;doAnimation="undefined"==typeof doAnimation||doAnimation,t.controlsAreVisible&&!t.options.alwaysShowControls&&(doAnimation?(t.controls.stop(!0,!0).fadeOut(200,function(){$(this).css("visibility","hidden").css("display","block"),t.controlsAreVisible=!1,t.container.trigger("controlshidden")}),t.container.find(".mejs-control").stop(!0,!0).fadeOut(200,function(){$(this).css("visibility","hidden").css("display","block")})):(t.controls.css("visibility","hidden").css("display","block"),t.container.find(".mejs-control").css("visibility","hidden").css("display","block"),t.controlsAreVisible=!1,t.container.trigger("controlshidden")))},controlsTimer:null,startControlsTimer:function(timeout){var t=this;timeout="undefined"!=typeof timeout?timeout:1500,t.killControlsTimer("start"),t.controlsTimer=setTimeout(function(){t.hideControls(),t.killControlsTimer("hide")},timeout)},killControlsTimer:function(){var t=this;null!==t.controlsTimer&&(clearTimeout(t.controlsTimer),delete t.controlsTimer,t.controlsTimer=null)},controlsEnabled:!0,disableControls:function(){var t=this;t.killControlsTimer(),t.hideControls(!1),this.controlsEnabled=!1},enableControls:function(){var t=this;t.showControls(!1),t.controlsEnabled=!0},meReady:function(media,domNode){var featureIndex,feature,t=this,mf=mejs.MediaFeatures,autoplayAttr=domNode.getAttribute("autoplay"),autoplay=!("undefined"==typeof autoplayAttr||null===autoplayAttr||"false"===autoplayAttr);if(!t.created){if(t.created=!0,t.media=media,t.domNode=domNode,!(mf.isAndroid&&t.options.AndroidUseNativeControls||mf.isiPad&&t.options.iPadUseNativeControls||mf.isiPhone&&t.options.iPhoneUseNativeControls)){t.buildposter(t,t.controls,t.layers,t.media),t.buildkeyboard(t,t.controls,t.layers,t.media),t.buildoverlays(t,t.controls,t.layers,t.media),t.findTracks();for(featureIndex in t.options.features)if(feature=t.options.features[featureIndex],t["build"+feature])try{t["build"+feature](t,t.controls,t.layers,t.media)}catch(e){}t.container.trigger("controlsready"),t.setPlayerSize(t.width,t.height),t.setControlsSize(),t.isVideo&&(mejs.MediaFeatures.hasTouch?t.$media.bind("touchstart",function(){t.controlsAreVisible?t.hideControls(!1):t.controlsEnabled&&t.showControls(!1)}):(mejs.MediaElementPlayer.prototype.clickToPlayPauseCallback=function(){t.options.clickToPlayPause&&(t.media.paused?t.media.play():t.media.pause())},t.media.addEventListener("click",t.clickToPlayPauseCallback,!1),t.container.bind("mouseenter mouseover",function(){t.controlsEnabled&&(t.options.alwaysShowControls||(t.killControlsTimer("enter"),t.showControls(),t.startControlsTimer(2500)))}).bind("mousemove",function(){t.controlsEnabled&&(t.controlsAreVisible||t.showControls(),t.options.alwaysShowControls||t.startControlsTimer(2500))}).bind("mouseleave",function(){t.controlsEnabled&&(t.media.paused||t.options.alwaysShowControls||t.startControlsTimer(1e3))})),t.options.hideVideoControlsOnLoad&&t.hideControls(!1),autoplay&&!t.options.alwaysShowControls&&t.hideControls(),t.options.enableAutosize&&t.media.addEventListener("loadedmetadata",function(e){t.options.videoHeight<=0&&null===t.domNode.getAttribute("height")&&!isNaN(e.target.videoHeight)&&(t.setPlayerSize(e.target.videoWidth,e.target.videoHeight),t.setControlsSize(),t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight))},!1)),media.addEventListener("play",function(){var playerIndex;for(playerIndex in mejs.players){var p=mejs.players[playerIndex];p.id==t.id||!t.options.pauseOtherPlayers||p.paused||p.ended||p.pause(),p.hasFocus=!1}t.hasFocus=!0},!1),t.media.addEventListener("ended",function(){if(t.options.autoRewind)try{t.media.setCurrentTime(0)}catch(exp){}t.media.pause(),t.setProgressRail&&t.setProgressRail(),t.setCurrentRail&&t.setCurrentRail(),t.options.loop?t.media.play():!t.options.alwaysShowControls&&t.controlsEnabled&&t.showControls()},!1),t.media.addEventListener("loadedmetadata",function(){t.updateDuration&&t.updateDuration(),t.updateCurrent&&t.updateCurrent(),t.isFullScreen||(t.setPlayerSize(t.width,t.height),t.setControlsSize())},!1),setTimeout(function(){t.setPlayerSize(t.width,t.height),t.setControlsSize()},50),t.globalBind("resize",function(){t.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen||t.setPlayerSize(t.width,t.height),t.setControlsSize()}),"youtube"==t.media.pluginType&&t.container.find(".mejs-overlay-play").hide()}autoplay&&"native"==media.pluginType&&(media.load(),media.play()),t.options.success&&("string"==typeof t.options.success?window[t.options.success](t.media,t.domNode,t):t.options.success(t.media,t.domNode,t))}},handleError:function(e){var t=this;t.controls.hide(),t.options.error&&t.options.error(e)},setPlayerSize:function(width,height){var t=this;if("undefined"!=typeof width&&(t.width=width),"undefined"!=typeof height&&(t.height=height),t.height.toString().indexOf("%")>0||"100%"===t.$node.css("max-width")||parseInt(t.$node.css("max-width").replace(/px/,""),10)/t.$node.offsetParent().width()===1||t.$node[0].currentStyle&&"100%"===t.$node[0].currentStyle.maxWidth){var nativeWidth=t.isVideo?t.media.videoWidth&&t.media.videoWidth>0?t.media.videoWidth:t.options.defaultVideoWidth:t.options.defaultAudioWidth,nativeHeight=t.isVideo?t.media.videoHeight&&t.media.videoHeight>0?t.media.videoHeight:t.options.defaultVideoHeight:t.options.defaultAudioHeight,parentWidth=t.container.parent().closest(":visible").width(),newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;"body"===t.container.parent()[0].tagName.toLowerCase()&&(parentWidth=$(window).width(),newHeight=$(window).height()),isNaN(newHeight)&&nativeHeight.indexOf("%")&&(newHeight=t.container.parent().closest(":visible").height()),0!=newHeight&&0!=parentWidth&&(t.container.width(parentWidth).height(newHeight),t.$media.add(t.container.find(".mejs-shim")).width("100%").height("100%"),t.isVideo&&t.media.setVideoSize&&t.media.setVideoSize(parentWidth,newHeight),t.layers.children(".mejs-layer").width("100%").height("100%"))}else t.container.width(t.width).height(t.height),t.layers.children(".mejs-layer").width(t.width).height(t.height);var playLayer=t.layers.find(".mejs-overlay-play"),playButton=playLayer.find(".mejs-overlay-button");playLayer.height(t.container.height()-t.controls.height()),playButton.css("margin-top","-"+(playButton.height()/2-t.controls.height()/2).toString()+"px")},setControlsSize:function(){var t=this,usedWidth=0,railWidth=0,rail=t.controls.find(".mejs-time-rail"),total=t.controls.find(".mejs-time-total"),others=(t.controls.find(".mejs-time-current"),t.controls.find(".mejs-time-loaded"),rail.siblings());t.options&&!t.options.autosizeProgress&&(railWidth=parseInt(rail.css("width"))),0!==railWidth&&railWidth||(others.each(function(){var $this=$(this);"absolute"!=$this.css("position")&&$this.is(":visible")&&(usedWidth+=$(this).outerWidth(!0))}),railWidth=t.controls.width()-usedWidth-(rail.outerWidth(!0)-rail.width())),rail.width(railWidth),total.width(railWidth-(total.outerWidth(!0)-total.width())),t.setProgressRail&&t.setProgressRail(),t.setCurrentRail&&t.setCurrentRail()},buildposter:function(player,controls,layers,media){var t=this,poster=$('<div class="mejs-poster mejs-layer"></div>').appendTo(layers),posterUrl=player.$media.attr("poster");""!==player.options.poster&&(posterUrl=player.options.poster),""!==posterUrl&&null!=posterUrl?t.setPoster(posterUrl):poster.hide(),media.addEventListener("play",function(){poster.hide()},!1),player.options.showPosterWhenEnded&&player.options.autoRewind&&media.addEventListener("ended",function(){poster.show()},!1)},setPoster:function(url){var t=this,posterDiv=t.container.find(".mejs-poster"),posterImg=posterDiv.find("img");0==posterImg.length&&(posterImg=$('<img width="100%" height="100%" />').appendTo(posterDiv)),posterImg.attr("src",url),posterDiv.css({"background-image":"url("+url+")"})},buildoverlays:function(player,controls,layers,media){var t=this;if(player.isVideo){var loading=$('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-loading"><span></span></div></div>').hide().appendTo(layers),error=$('<div class="mejs-overlay mejs-layer"><div class="mejs-overlay-error"></div></div>').hide().appendTo(layers),bigPlay=$('<div class="mejs-overlay mejs-layer mejs-overlay-play"><div class="mejs-overlay-button"></div></div>').appendTo(layers).click(function(){t.options.clickToPlayPause&&(media.paused?media.play():media.pause())});media.addEventListener("play",function(){bigPlay.hide(),loading.hide(),controls.find(".mejs-time-buffering").hide(),error.hide()},!1),media.addEventListener("playing",function(){bigPlay.hide(),loading.hide(),controls.find(".mejs-time-buffering").hide(),error.hide()},!1),media.addEventListener("seeking",function(){loading.show(),controls.find(".mejs-time-buffering").show()},!1),media.addEventListener("seeked",function(){loading.hide(),controls.find(".mejs-time-buffering").hide()},!1),media.addEventListener("pause",function(){mejs.MediaFeatures.isiPhone||bigPlay.show()},!1),media.addEventListener("waiting",function(){loading.show(),controls.find(".mejs-time-buffering").show()},!1),media.addEventListener("loadeddata",function(){loading.show(),controls.find(".mejs-time-buffering").show()},!1),media.addEventListener("canplay",function(){loading.hide(),controls.find(".mejs-time-buffering").hide()},!1),media.addEventListener("error",function(){loading.hide(),controls.find(".mejs-time-buffering").hide(),error.show(),error.find("mejs-overlay-error").html("Error loading this resource")},!1)}},buildkeyboard:function(player,controls,layers,media){var t=this;t.globalBind("keydown",function(e){if(player.hasFocus&&player.options.enableKeyboard)for(var i=0,il=player.options.keyActions.length;il>i;i++)for(var keyAction=player.options.keyActions[i],j=0,jl=keyAction.keys.length;jl>j;j++)if(e.keyCode==keyAction.keys[j])return e.preventDefault(),keyAction.action(player,media,e.keyCode),!1;return!0}),t.globalBind("click",function(event){0==$(event.target).closest(".mejs-container").length&&(player.hasFocus=!1)})},findTracks:function(){var t=this,tracktags=t.$media.find("track");t.tracks=[],tracktags.each(function(index,track){track=$(track),t.tracks.push({srclang:track.attr("srclang")?track.attr("srclang").toLowerCase():"",src:track.attr("src"),kind:track.attr("kind"),label:track.attr("label")||"",entries:[],isLoaded:!1})})},changeSkin:function(className){this.container[0].className="mejs-container "+className,this.setPlayerSize(this.width,this.height),this.setControlsSize()},play:function(){this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){this.media.load()},setMuted:function(muted){this.media.setMuted(muted)},setCurrentTime:function(time){this.media.setCurrentTime(time)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(volume){this.media.setVolume(volume)},getVolume:function(){return this.media.volume},setSrc:function(src){this.media.setSrc(src)},remove:function(){var featureIndex,feature,t=this;for(featureIndex in t.options.features)if(feature=t.options.features[featureIndex],t["clean"+feature])try{t["clean"+feature](t)}catch(e){}t.isDynamic?t.$node.insertBefore(t.container):(t.$media.prop("controls",!0),t.$node.clone().show().insertBefore(t.container),t.$node.remove()),"native"!==t.media.pluginType&&t.media.remove(),delete mejs.players[t.id],t.container.remove(),t.globalUnbind(),delete t.node.player}},function(){function splitEvents(events,id){var ret={d:[],w:[]};return $.each((events||"").split(" "),function(k,v){var eventname=v+"."+id;0===eventname.indexOf(".")?(ret.d.push(eventname),ret.w.push(eventname)):ret[rwindow.test(v)?"w":"d"].push(eventname)}),ret.d=ret.d.join(" "),ret.w=ret.w.join(" "),ret}var rwindow=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;mejs.MediaElementPlayer.prototype.globalBind=function(events,data,callback){var t=this;events=splitEvents(events,t.id),events.d&&$(document).bind(events.d,data,callback),events.w&&$(window).bind(events.w,data,callback)},mejs.MediaElementPlayer.prototype.globalUnbind=function(events,callback){var t=this;events=splitEvents(events,t.id),events.d&&$(document).unbind(events.d,callback),events.w&&$(window).unbind(events.w,callback)}}(),"undefined"!=typeof jQuery&&(jQuery.fn.mediaelementplayer=function(options){return options===!1?this.each(function(){var player=jQuery(this).data("mediaelementplayer");player&&player.remove(),jQuery(this).removeData("mediaelementplayer")}):this.each(function(){jQuery(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,options))}),this}),$(document).ready(function(){$(".mejs-player").mediaelementplayer()}),window.MediaElementPlayer=mejs.MediaElementPlayer}(mejs.$),function($){$.extend(mejs.MepDefaults,{playpauseText:mejs.i18n.t("Play/Pause")}),$.extend(MediaElementPlayer.prototype,{buildplaypause:function(player,controls,layers,media){var t=this,play=$('<div class="mejs-button mejs-playpause-button mejs-play" ><button type="button" aria-controls="'+t.id+'" title="'+t.options.playpauseText+'" aria-label="'+t.options.playpauseText+'"></button></div>').appendTo(controls).click(function(e){return e.preventDefault(),media.paused?media.play():media.pause(),!1});media.addEventListener("play",function(){play.removeClass("mejs-play").addClass("mejs-pause")},!1),media.addEventListener("playing",function(){play.removeClass("mejs-play").addClass("mejs-pause")},!1),media.addEventListener("pause",function(){play.removeClass("mejs-pause").addClass("mejs-play")},!1),media.addEventListener("paused",function(){play.removeClass("mejs-pause").addClass("mejs-play")},!1)}})}(mejs.$),function($){$.extend(mejs.MepDefaults,{stopText:"Stop"}),$.extend(MediaElementPlayer.prototype,{buildstop:function(player,controls,layers,media){{var t=this;$('<div class="mejs-button mejs-stop-button mejs-stop"><button type="button" aria-controls="'+t.id+'" title="'+t.options.stopText+'" aria-label="'+t.options.stopText+'"></button></div>').appendTo(controls).click(function(){media.paused||media.pause(),media.currentTime>0&&(media.setCurrentTime(0),media.pause(),controls.find(".mejs-time-current").width("0px"),controls.find(".mejs-time-handle").css("left","0px"),controls.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0)),controls.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0)),layers.find(".mejs-poster").show())})}}})}(mejs.$),function($){$.extend(MediaElementPlayer.prototype,{buildprogress:function(player,controls,layers,media){$('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(controls),controls.find(".mejs-time-buffering").hide();var t=this,total=controls.find(".mejs-time-total"),loaded=controls.find(".mejs-time-loaded"),current=controls.find(".mejs-time-current"),handle=controls.find(".mejs-time-handle"),timefloat=controls.find(".mejs-time-float"),timefloatcurrent=controls.find(".mejs-time-float-current"),handleMouseMove=function(e){var x=e.pageX,offset=total.offset(),width=total.outerWidth(!0),percentage=0,newTime=0,pos=0;media.duration&&(x<offset.left?x=offset.left:x>width+offset.left&&(x=width+offset.left),pos=x-offset.left,percentage=pos/width,newTime=.02>=percentage?0:percentage*media.duration,mouseIsDown&&newTime!==media.currentTime&&media.setCurrentTime(newTime),mejs.MediaFeatures.hasTouch||(timefloat.css("left",pos),timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime)),timefloat.show()))},mouseIsDown=!1,mouseIsOver=!1;total.bind("mousedown",function(e){return 1===e.which?(mouseIsDown=!0,handleMouseMove(e),t.globalBind("mousemove.dur",function(e){handleMouseMove(e)}),t.globalBind("mouseup.dur",function(){mouseIsDown=!1,timefloat.hide(),t.globalUnbind(".dur")}),!1):void 0}).bind("mouseenter",function(){mouseIsOver=!0,t.globalBind("mousemove.dur",function(e){handleMouseMove(e)}),mejs.MediaFeatures.hasTouch||timefloat.show()}).bind("mouseleave",function(){mouseIsOver=!1,mouseIsDown||(t.globalUnbind(".dur"),timefloat.hide())}),media.addEventListener("progress",function(e){player.setProgressRail(e),player.setCurrentRail(e)},!1),media.addEventListener("timeupdate",function(e){player.setProgressRail(e),player.setCurrentRail(e)},!1),t.loaded=loaded,t.total=total,t.current=current,t.handle=handle},setProgressRail:function(e){var t=this,target=void 0!=e?e.target:t.media,percent=null;target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration?percent=target.buffered.end(0)/target.duration:target&&void 0!=target.bytesTotal&&target.bytesTotal>0&&void 0!=target.bufferedBytes?percent=target.bufferedBytes/target.bytesTotal:e&&e.lengthComputable&&0!=e.total&&(percent=e.loaded/e.total),null!==percent&&(percent=Math.min(1,Math.max(0,percent)),t.loaded&&t.total&&t.loaded.width(t.total.width()*percent))},setCurrentRail:function(){var t=this;if(void 0!=t.media.currentTime&&t.media.duration&&t.total&&t.handle){var newWidth=Math.round(t.total.width()*t.media.currentTime/t.media.duration),handlePos=newWidth-Math.round(t.handle.outerWidth(!0)/2);t.current.width(newWidth),t.handle.css("left",handlePos)}}})}(mejs.$),function($){$.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"}),$.extend(MediaElementPlayer.prototype,{buildcurrent:function(player,controls,layers,media){var t=this;$('<div class="mejs-time"><span class="mejs-currenttime">'+(player.options.alwaysShowHours?"00:":"")+(player.options.showTimecodeFrameCount?"00:00:00":"00:00")+"</span></div>").appendTo(controls),t.currenttime=t.controls.find(".mejs-currenttime"),media.addEventListener("timeupdate",function(){player.updateCurrent()},!1)},buildduration:function(player,controls,layers,media){var t=this;controls.children().last().find(".mejs-currenttime").length>0?$(t.options.timeAndDurationSeparator+'<span class="mejs-duration">'+(t.options.duration>0?mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):(player.options.alwaysShowHours?"00:":"")+(player.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span>").appendTo(controls.find(".mejs-time")):(controls.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container"),$('<div class="mejs-time mejs-duration-container"><span class="mejs-duration">'+(t.options.duration>0?mejs.Utility.secondsToTimeCode(t.options.duration,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25):(player.options.alwaysShowHours?"00:":"")+(player.options.showTimecodeFrameCount?"00:00:00":"00:00"))+"</span></div>").appendTo(controls)),t.durationD=t.controls.find(".mejs-duration"),media.addEventListener("timeupdate",function(){player.updateDuration()},!1)},updateCurrent:function(){var t=this;t.currenttime&&t.currenttime.html(mejs.Utility.secondsToTimeCode(t.media.currentTime,t.options.alwaysShowHours||t.media.duration>3600,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25))},updateDuration:function(){var t=this;t.container.toggleClass("mejs-long-video",t.media.duration>3600),t.durationD&&(t.options.duration>0||t.media.duration)&&t.durationD.html(mejs.Utility.secondsToTimeCode(t.options.duration>0?t.options.duration:t.media.duration,t.options.alwaysShowHours,t.options.showTimecodeFrameCount,t.options.framesPerSecond||25))}})}(mejs.$),function($){$.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),$.extend(MediaElementPlayer.prototype,{buildvolume:function(player,controls,layers,media){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var t=this,mode=t.isVideo?t.options.videoVolume:t.options.audioVolume,mute="horizontal"==mode?$('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(controls):$('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(controls),volumeSlider=t.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),volumeTotal=t.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),volumeCurrent=t.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),volumeHandle=t.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),positionVolumeHandle=function(volume,secondTry){if(!volumeSlider.is(":visible")&&"undefined"==typeof secondTry)return volumeSlider.show(),positionVolumeHandle(volume,!0),volumeSlider.hide(),void 0;if(volume=Math.max(0,volume),volume=Math.min(volume,1),0==volume?mute.removeClass("mejs-mute").addClass("mejs-unmute"):mute.removeClass("mejs-unmute").addClass("mejs-mute"),"vertical"==mode){var totalHeight=volumeTotal.height(),totalPosition=volumeTotal.position(),newTop=totalHeight-totalHeight*volume;volumeHandle.css("top",Math.round(totalPosition.top+newTop-volumeHandle.height()/2)),volumeCurrent.height(totalHeight-newTop),volumeCurrent.css("top",totalPosition.top+newTop)}else{var totalWidth=volumeTotal.width(),totalPosition=volumeTotal.position(),newLeft=totalWidth*volume;volumeHandle.css("left",Math.round(totalPosition.left+newLeft-volumeHandle.width()/2)),volumeCurrent.width(Math.round(newLeft))}},handleVolumeMove=function(e){var volume=null,totalOffset=volumeTotal.offset();if("vertical"==mode){var railHeight=volumeTotal.height(),newY=(parseInt(volumeTotal.css("top").replace(/px/,""),10),e.pageY-totalOffset.top);if(volume=(railHeight-newY)/railHeight,0==totalOffset.top||0==totalOffset.left)return}else{var railWidth=volumeTotal.width(),newX=e.pageX-totalOffset.left;volume=newX/railWidth}volume=Math.max(0,volume),volume=Math.min(volume,1),positionVolumeHandle(volume),0==volume?media.setMuted(!0):media.setMuted(!1),media.setVolume(volume)},mouseIsDown=!1,mouseIsOver=!1;mute.hover(function(){volumeSlider.show(),mouseIsOver=!0},function(){mouseIsOver=!1,mouseIsDown||"vertical"!=mode||volumeSlider.hide()}),volumeSlider.bind("mouseover",function(){mouseIsOver=!0}).bind("mousedown",function(e){return handleVolumeMove(e),t.globalBind("mousemove.vol",function(e){handleVolumeMove(e)}),t.globalBind("mouseup.vol",function(){mouseIsDown=!1,t.globalUnbind(".vol"),mouseIsOver||"vertical"!=mode||volumeSlider.hide()}),mouseIsDown=!0,!1}),mute.find("button").click(function(){media.setMuted(!media.muted)}),media.addEventListener("volumechange",function(){mouseIsDown||(media.muted?(positionVolumeHandle(0),mute.removeClass("mejs-mute").addClass("mejs-unmute")):(positionVolumeHandle(media.volume),mute.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),t.container.is(":visible")&&(positionVolumeHandle(player.options.startVolume),0===player.options.startVolume&&media.setMuted(!0),"native"===media.pluginType&&media.setVolume(player.options.startVolume))}}})}(mejs.$),function($){$.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),$.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,buildfullscreen:function(player,controls,layers,media){if(player.isVideo){if(player.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen){var func=function(){player.isFullScreen&&(mejs.MediaFeatures.isFullScreen()?(player.isNativeFullScreen=!0,player.setControlsSize()):(player.isNativeFullScreen=!1,player.exitFullScreen()))};mejs.MediaFeatures.hasMozNativeFullScreen?player.globalBind(mejs.MediaFeatures.fullScreenEventName,func):player.container.bind(mejs.MediaFeatures.fullScreenEventName,func)}var t=this,fullscreenBtn=(player.container,$('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+t.id+'" title="'+t.options.fullscreenText+'" aria-label="'+t.options.fullscreenText+'"></button></div>').appendTo(controls));if("native"===t.media.pluginType||!t.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)fullscreenBtn.click(function(){var isFullScreen=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||player.isFullScreen;isFullScreen?player.exitFullScreen():player.enterFullScreen()});else{var hideTimeout=null,supportsPointerEvents=function(){var supports,element=document.createElement("x"),documentElement=document.documentElement,getComputedStyle=window.getComputedStyle;return"pointerEvents"in element.style?(element.style.pointerEvents="auto",element.style.pointerEvents="x",documentElement.appendChild(element),supports=getComputedStyle&&"auto"===getComputedStyle(element,"").pointerEvents,documentElement.removeChild(element),!!supports):!1}();if(supportsPointerEvents&&!mejs.MediaFeatures.isOpera){var i,len,fullscreenIsDisabled=!1,restoreControls=function(){if(fullscreenIsDisabled){for(var i in hoverDivs)hoverDivs[i].hide();fullscreenBtn.css("pointer-events",""),t.controls.css("pointer-events",""),t.media.removeEventListener("click",t.clickToPlayPauseCallback),fullscreenIsDisabled=!1}},hoverDivs={},hoverDivNames=["top","left","right","bottom"],positionHoverDivs=function(){var fullScreenBtnOffsetLeft=fullscreenBtn.offset().left-t.container.offset().left,fullScreenBtnOffsetTop=fullscreenBtn.offset().top-t.container.offset().top,fullScreenBtnWidth=fullscreenBtn.outerWidth(!0),fullScreenBtnHeight=fullscreenBtn.outerHeight(!0),containerWidth=t.container.width(),containerHeight=t.container.height();for(i in hoverDivs)hoverDivs[i].css({position:"absolute",top:0,left:0});hoverDivs.top.width(containerWidth).height(fullScreenBtnOffsetTop),hoverDivs.left.width(fullScreenBtnOffsetLeft).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop}),hoverDivs.right.width(containerWidth-fullScreenBtnOffsetLeft-fullScreenBtnWidth).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop,left:fullScreenBtnOffsetLeft+fullScreenBtnWidth}),hoverDivs.bottom.width(containerWidth).height(containerHeight-fullScreenBtnHeight-fullScreenBtnOffsetTop).css({top:fullScreenBtnOffsetTop+fullScreenBtnHeight})};for(t.globalBind("resize",function(){positionHoverDivs()}),i=0,len=hoverDivNames.length;len>i;i++)hoverDivs[hoverDivNames[i]]=$('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(restoreControls).hide();fullscreenBtn.on("mouseover",function(){if(!t.isFullScreen){var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();
media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,!1),fullscreenBtn.css("pointer-events","none"),t.controls.css("pointer-events","none"),t.media.addEventListener("click",t.clickToPlayPauseCallback);for(i in hoverDivs)hoverDivs[i].show();positionHoverDivs(),fullscreenIsDisabled=!0}}),media.addEventListener("fullscreenchange",function(){t.isFullScreen=!t.isFullScreen,t.isFullScreen?t.media.removeEventListener("click",t.clickToPlayPauseCallback):t.media.addEventListener("click",t.clickToPlayPauseCallback),restoreControls()}),t.globalBind("mousemove",function(e){if(fullscreenIsDisabled){var fullscreenBtnPos=fullscreenBtn.offset();(e.pageY<fullscreenBtnPos.top||e.pageY>fullscreenBtnPos.top+fullscreenBtn.outerHeight(!0)||e.pageX<fullscreenBtnPos.left||e.pageX>fullscreenBtnPos.left+fullscreenBtn.outerWidth(!0))&&(fullscreenBtn.css("pointer-events",""),t.controls.css("pointer-events",""),fullscreenIsDisabled=!1)}})}else fullscreenBtn.on("mouseover",function(){null!==hideTimeout&&(clearTimeout(hideTimeout),delete hideTimeout);var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,!0)}).on("mouseout",function(){null!==hideTimeout&&(clearTimeout(hideTimeout),delete hideTimeout),hideTimeout=setTimeout(function(){media.hideFullscreenButton()},1500)})}player.fullscreenBtn=fullscreenBtn,t.globalBind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen)&&27==e.keyCode&&player.exitFullScreen()})}},cleanfullscreen:function(player){player.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if("native"===t.media.pluginType||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){if($(document.documentElement).addClass("mejs-fullscreen"),normalHeight=t.container.height(),normalWidth=t.container.width(),"native"===t.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function checkFullscreen(){t.isNativeFullScreen&&($(window).width()!==screen.width?t.exitFullScreen():setTimeout(checkFullscreen,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return t.media.webkitEnterFullscreen(),void 0;if(t.isInIframe){var url=t.options.newWindowCallback(this);if(""!==url){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return t.pause(),window.open(url,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"),void 0;setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(url,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.media.pluginType?t.$media.width("100%").height("100%"):(t.container.find(".mejs-shim").width("100%").height("100%"),t.media.setVideoSize($(window).width(),$(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0}},exitFullScreen:function(){var t=this;return clearTimeout(t.containerSizeTimeout),"native"!==t.media.pluginType&&mejs.MediaFeatures.isFirefox?(t.media.setFullscreen(!1),void 0):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),$(document.documentElement).removeClass("mejs-fullscreen"),t.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),"native"===t.media.pluginType?t.$media.width(normalWidth).height(normalHeight):(t.container.find(".mejs-shim").width(normalWidth).height(normalHeight),t.media.setVideoSize(normalWidth,normalHeight)),t.layers.children("div").width(normalWidth).height(normalHeight),t.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),t.setControlsSize(),t.isFullScreen=!1,void 0)}})}(mejs.$),function($){$.extend(mejs.MepDefaults,{startLanguage:"",tracksText:mejs.i18n.t("Captions/Subtitles"),hideCaptionsButtonWhenEmpty:!0,toggleCaptionsButtonWhenOnlyOne:!1,slidesSelector:""}),$.extend(MediaElementPlayer.prototype,{hasChapters:!1,buildtracks:function(player,controls,layers,media){if(0!=player.tracks.length){var i,t=this;if(t.domNode.textTracks)for(var i=t.domNode.textTracks.length-1;i>=0;i--)t.domNode.textTracks[i].mode="hidden";player.chapters=$('<div class="mejs-chapters mejs-layer"></div>').prependTo(layers).hide(),player.captions=$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover"><span class="mejs-captions-text"></span></div></div>').prependTo(layers).hide(),player.captionsText=player.captions.find(".mejs-captions-text"),player.captionsButton=$('<div class="mejs-button mejs-captions-button"><button type="button" aria-controls="'+t.id+'" title="'+t.options.tracksText+'" aria-label="'+t.options.tracksText+'"></button><div class="mejs-captions-selector"><ul><li><input type="radio" name="'+player.id+'_captions" id="'+player.id+'_captions_none" value="none" checked="checked" /><label for="'+player.id+'_captions_none">'+mejs.i18n.t("None")+"</label></li></ul></div></div>").appendTo(controls);var subtitleCount=0;for(i=0;i<player.tracks.length;i++)"subtitles"==player.tracks[i].kind&&subtitleCount++;for(t.options.toggleCaptionsButtonWhenOnlyOne&&1==subtitleCount?player.captionsButton.on("click",function(){if(null==player.selectedTrack)var lang=player.tracks[0].srclang;else var lang="none";player.setTrack(lang)}):player.captionsButton.hover(function(){$(this).find(".mejs-captions-selector").css("visibility","visible")},function(){$(this).find(".mejs-captions-selector").css("visibility","hidden")}).on("click","input[type=radio]",function(){lang=this.value,player.setTrack(lang)}),player.options.alwaysShowControls?player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover"):player.container.bind("controlsshown",function(){player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){media.paused||player.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}),player.trackToLoad=-1,player.selectedTrack=null,player.isLoadingTrack=!1,i=0;i<player.tracks.length;i++)"subtitles"==player.tracks[i].kind&&player.addTrackButton(player.tracks[i].srclang,player.tracks[i].label);player.loadNextTrack(),media.addEventListener("timeupdate",function(){player.displayCaptions()},!1),""!=player.options.slidesSelector&&(player.slidesContainer=$(player.options.slidesSelector),media.addEventListener("timeupdate",function(){player.displaySlides()},!1)),media.addEventListener("loadedmetadata",function(){player.displayChapters()},!1),player.container.hover(function(){player.hasChapters&&(player.chapters.css("visibility","visible"),player.chapters.fadeIn(200).height(player.chapters.find(".mejs-chapter").outerHeight()))},function(){player.hasChapters&&!media.paused&&player.chapters.fadeOut(200,function(){$(this).css("visibility","hidden"),$(this).css("display","block")})}),null!==player.node.getAttribute("autoplay")&&player.chapters.css("visibility","hidden")}},setTrack:function(lang){var i,t=this;if("none"==lang)t.selectedTrack=null,t.captionsButton.removeClass("mejs-captions-enabled");else for(i=0;i<t.tracks.length;i++)if(t.tracks[i].srclang==lang){null==t.selectedTrack&&t.captionsButton.addClass("mejs-captions-enabled"),t.selectedTrack=t.tracks[i],t.captions.attr("lang",t.selectedTrack.srclang),t.displayCaptions();break}},loadNextTrack:function(){var t=this;t.trackToLoad++,t.trackToLoad<t.tracks.length?(t.isLoadingTrack=!0,t.loadTrack(t.trackToLoad)):(t.isLoadingTrack=!1,t.checkForTracks())},loadTrack:function(index){var t=this,track=t.tracks[index],after=function(){track.isLoaded=!0,t.enableTrackButton(track.srclang,track.label),t.loadNextTrack()};$.ajax({url:track.src,dataType:"text",success:function(d){track.entries="string"==typeof d&&/<tt\s+xml/gi.exec(d)?mejs.TrackFormatParser.dfxp.parse(d):mejs.TrackFormatParser.webvvt.parse(d),after(),"chapters"==track.kind&&t.media.addEventListener("play",function(){t.media.duration>0&&t.displayChapters(track)},!1),"slides"==track.kind&&t.setupSlides(track)},error:function(){t.loadNextTrack()}})},enableTrackButton:function(lang,label){var t=this;""===label&&(label=mejs.language.codes[lang]||lang),t.captionsButton.find("input[value="+lang+"]").prop("disabled",!1).siblings("label").html(label),t.options.startLanguage==lang&&$("#"+t.id+"_captions_"+lang).click(),t.adjustLanguageBox()},addTrackButton:function(lang,label){var t=this;""===label&&(label=mejs.language.codes[lang]||lang),t.captionsButton.find("ul").append($('<li><input type="radio" name="'+t.id+'_captions" id="'+t.id+"_captions_"+lang+'" value="'+lang+'" disabled="disabled" /><label for="'+t.id+"_captions_"+lang+'">'+label+" (loading)</label></li>")),t.adjustLanguageBox(),t.container.find(".mejs-captions-translations option[value="+lang+"]").remove()},adjustLanguageBox:function(){var t=this;t.captionsButton.find(".mejs-captions-selector").height(t.captionsButton.find(".mejs-captions-selector ul").outerHeight(!0)+t.captionsButton.find(".mejs-captions-translations").outerHeight(!0))},checkForTracks:function(){var t=this,hasSubtitles=!1;if(t.options.hideCaptionsButtonWhenEmpty){for(i=0;i<t.tracks.length;i++)if("subtitles"==t.tracks[i].kind){hasSubtitles=!0;break}hasSubtitles||(t.captionsButton.hide(),t.setControlsSize())}},displayCaptions:function(){if("undefined"!=typeof this.tracks){var i,t=this,track=t.selectedTrack;if(null!=track&&track.isLoaded){for(i=0;i<track.entries.times.length;i++)if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop)return t.captionsText.html(track.entries.text[i]),t.captions.show().height(0),void 0;t.captions.hide()}else t.captions.hide()}},setupSlides:function(track){var t=this;t.slides=track,t.slides.entries.imgs=[t.slides.entries.text.length],t.showSlide(0)},showSlide:function(index){if("undefined"!=typeof this.tracks&&"undefined"!=typeof this.slidesContainer){var t=this,url=t.slides.entries.text[index],img=t.slides.entries.imgs[index];"undefined"==typeof img||"undefined"==typeof img.fadeIn?t.slides.entries.imgs[index]=img=$('<img src="'+url+'">').on("load",function(){img.appendTo(t.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()}):img.is(":visible")||img.is(":animated")||img.fadeIn().siblings(":visible").fadeOut()}},displaySlides:function(){if("undefined"!=typeof this.slides){var i,t=this,slides=t.slides;for(i=0;i<slides.entries.times.length;i++)if(t.media.currentTime>=slides.entries.times[i].start&&t.media.currentTime<=slides.entries.times[i].stop)return t.showSlide(i),void 0}},displayChapters:function(){var i,t=this;for(i=0;i<t.tracks.length;i++)if("chapters"==t.tracks[i].kind&&t.tracks[i].isLoaded){t.drawChapters(t.tracks[i]),t.hasChapters=!0;break}},drawChapters:function(chapters){var i,dur,t=this,percent=0,usedPercent=0;for(t.chapters.empty(),i=0;i<chapters.entries.times.length;i++)dur=chapters.entries.times[i].stop-chapters.entries.times[i].start,percent=Math.floor(dur/t.media.duration*100),(percent+usedPercent>100||i==chapters.entries.times.length-1&&100>percent+usedPercent)&&(percent=100-usedPercent),t.chapters.append($('<div class="mejs-chapter" rel="'+chapters.entries.times[i].start+'" style="left: '+usedPercent.toString()+"%;width: "+percent.toString()+'%;"><div class="mejs-chapter-block'+(i==chapters.entries.times.length-1?" mejs-chapter-block-last":"")+'"><span class="ch-title">'+chapters.entries.text[i]+'</span><span class="ch-time">'+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start)+"&ndash;"+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop)+"</span></div></div>")),usedPercent+=percent;t.chapters.find("div.mejs-chapter").click(function(){t.media.setCurrentTime(parseFloat($(this).attr("rel"))),t.media.paused&&t.media.play()}),t.chapters.show()}}),mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}},mejs.TrackFormatParser={webvvt:{pattern_identifier:/^([a-zA-z]+-)?[0-9]+$/,pattern_timecode:/^([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(trackText){for(var timecode,text,i=0,lines=mejs.TrackFormatParser.split2(trackText,/\r?\n/),entries={text:[],times:[]};i<lines.length;i++)if(this.pattern_identifier.exec(lines[i])&&(i++,timecode=this.pattern_timecode.exec(lines[i]),timecode&&i<lines.length)){for(i++,text=lines[i],i++;""!==lines[i]&&i<lines.length;)text=text+"\n"+lines[i],i++;text=$.trim(text).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),entries.text.push(text),entries.times.push({start:0==mejs.Utility.convertSMPTEtoSeconds(timecode[1])?.2:mejs.Utility.convertSMPTEtoSeconds(timecode[1]),stop:mejs.Utility.convertSMPTEtoSeconds(timecode[3]),settings:timecode[5]})}return entries}},dfxp:{parse:function(trackText){trackText=$(trackText).filter("tt");var styles,text,i=0,container=trackText.children("div").eq(0),lines=container.find("p"),styleNode=trackText.find("#"+container.attr("style")),entries={text:[],times:[]};if(styleNode.length){var attributes=styleNode.removeAttr("id").get(0).attributes;if(attributes.length)for(styles={},i=0;i<attributes.length;i++)styles[attributes[i].name.split(":")[1]]=attributes[i].value}for(i=0;i<lines.length;i++){var style,_temp_times={start:null,stop:null,style:null};if(lines.eq(i).attr("begin")&&(_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("begin"))),!_temp_times.start&&lines.eq(i-1).attr("end")&&(_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr("end"))),lines.eq(i).attr("end")&&(_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("end"))),!_temp_times.stop&&lines.eq(i+1).attr("begin")&&(_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr("begin"))),styles){style="";for(var _style in styles)style+=_style+":"+styles[_style]+";"}style&&(_temp_times.style=style),0==_temp_times.start&&(_temp_times.start=.2),entries.times.push(_temp_times),text=$.trim(lines.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>"),entries.text.push(text),0==entries.times.start&&(entries.times.start=2)}return entries}},split2:function(text,regex){return text.split(regex)}},3!="x\n\ny".split(/\n/gi).length&&(mejs.TrackFormatParser.split2=function(text,regex){var i,parts=[],chunk="";for(i=0;i<text.length;i++)chunk+=text.substring(i,i+1),regex.test(chunk)&&(parts.push(chunk.replace(regex,"")),chunk="");return parts.push(chunk),parts})}(mejs.$),function($){$.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(player){return"undefined"==typeof player.enterFullScreen?null:player.isFullScreen?mejs.i18n.t("Turn off Fullscreen"):mejs.i18n.t("Go Fullscreen")},click:function(player){player.isFullScreen?player.exitFullScreen():player.enterFullScreen()}},{render:function(player){return player.media.muted?mejs.i18n.t("Unmute"):mejs.i18n.t("Mute")},click:function(player){player.media.muted?player.setMuted(!1):player.setMuted(!0)}},{isSeparator:!0},{render:function(){return mejs.i18n.t("Download Video")},click:function(player){window.location.href=player.media.currentSrc}}]}),$.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(player){player.contextMenu=$('<div class="mejs-contextmenu"></div>').appendTo($("body")).hide(),player.container.bind("contextmenu",function(e){return player.isContextMenuEnabled?(e.preventDefault(),player.renderContextMenu(e.clientX-1,e.clientY-1),!1):void 0}),player.container.bind("click",function(){player.contextMenu.hide()}),player.contextMenu.bind("mouseleave",function(){player.startContextMenuTimer()})},cleancontextmenu:function(player){player.contextMenu.remove()},isContextMenuEnabled:!0,enableContextMenu:function(){this.isContextMenuEnabled=!0},disableContextMenu:function(){this.isContextMenuEnabled=!1},contextMenuTimeout:null,startContextMenuTimer:function(){var t=this;t.killContextMenuTimer(),t.contextMenuTimer=setTimeout(function(){t.hideContextMenu(),t.killContextMenuTimer()},750)},killContextMenuTimer:function(){var timer=this.contextMenuTimer;null!=timer&&(clearTimeout(timer),delete timer,timer=null)},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(x,y){for(var t=this,html="",items=t.options.contextMenuItems,i=0,il=items.length;il>i;i++)if(items[i].isSeparator)html+='<div class="mejs-contextmenu-separator"></div>';else{var rendered=items[i].render(t);null!=rendered&&(html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+1e6*Math.random()+'">'+rendered+"</div>")}t.contextMenu.empty().append($(html)).css({top:y,left:x}).show(),t.contextMenu.find(".mejs-contextmenu-item").each(function(){var $dom=$(this),itemIndex=parseInt($dom.data("itemindex"),10),item=t.options.contextMenuItems[itemIndex];"undefined"!=typeof item.show&&item.show($dom,t),$dom.click(function(){"undefined"!=typeof item.click&&item.click(t),t.contextMenu.hide()})}),setTimeout(function(){t.killControlsTimer("rev3")},100)}})}(mejs.$),function($){$.extend(mejs.MepDefaults,{postrollCloseText:mejs.i18n.t("Close")}),$.extend(MediaElementPlayer.prototype,{buildpostroll:function(player,controls,layers){var t=this,postrollLink=t.container.find('link[rel="postroll"]').attr("href");"undefined"!=typeof postrollLink&&(player.postroll=$('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+t.options.postrollCloseText+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(layers).hide(),t.media.addEventListener("ended",function(){$.ajax({dataType:"html",url:postrollLink,success:function(data){layers.find(".mejs-postroll-layer-content").html(data)}}),player.postroll.show()},!1))}})}(mejs.$),// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
Backbone.Picky=function(Backbone,_){var Picky={};Picky.SingleSelect=function(collection){this.collection=collection},_.extend(Picky.SingleSelect.prototype,{select:function(model){model&&this.selected===model||(this.deselect(),this.selected=model,this.selected.select(),this.trigger("select:one",model))},deselect:function(model){this.selected&&(model=model||this.selected,this.selected===model&&(this.selected.deselect(),this.trigger("deselect:one",this.selected),delete this.selected))}}),Picky.MultiSelect=function(collection){this.collection=collection,this.selected={}},_.extend(Picky.MultiSelect.prototype,{select:function(model){this.selected[model.cid]||(this.selected[model.cid]=model,model.select(),calculateSelectedLength(this))},deselect:function(model){this.selected[model.cid]&&(delete this.selected[model.cid],model.deselect(),calculateSelectedLength(this))},selectAll:function(){this.each(function(model){model.select()}),calculateSelectedLength(this)},selectNone:function(){0!==this.selectedLength&&(this.each(function(model){model.deselect()}),calculateSelectedLength(this))},toggleSelectAll:function(){this.selectedLength===this.length?this.selectNone():this.selectAll()}}),Picky.Selectable=function(model){this.model=model},_.extend(Picky.Selectable.prototype,{select:function(){this.selected||(this.selected=!0,this.trigger("selected",this),this.collection&&this.collection.select(this))},deselect:function(){this.selected&&(this.selected=!1,this.trigger("deselected",this),this.collection&&this.collection.deselect(this))},toggleSelected:function(){this.selected?this.deselect():this.select()}});var calculateSelectedLength=function(collection){collection.selectedLength=_.size(collection.selected);var selectedLength=collection.selectedLength,length=collection.length;return selectedLength===length?(collection.trigger("select:all",collection),void 0):0===selectedLength?(collection.trigger("select:none",collection),void 0):selectedLength>0&&length>selectedLength?(collection.trigger("select:some",collection),void 0):void 0};return Picky}(Backbone,_),function(win,$){var site_namespace=win.__site_namespace__,namespace=site_namespace+".Util.PromiseMaker",PromiseMaker=(Logger.get(namespace),Namespace(namespace)),promises=[],getDeferred=function(){var deferred=$.Deferred(),promise=deferred.promise();return promises.push(promise),deferred},checkPromises=function(done,fail){$.when.apply($,promises).then(done,fail)};PromiseMaker.getDeferred=getDeferred,PromiseMaker.checkPromises=checkPromises}(window,jQuery),function(){return this.JST||(this.JST={}),this.JST["watch/library/media/youtube/templates/player"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="video-player-container">\n  <video id="video-player" ',(stack1=helpers.attributes)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.attributes,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),(stack1||0===stack1)&&(buffer+=stack1),buffer+='>\n    <source type="video/youtube" src="http://www.youtube.com/watch?v=',(stack1=helpers.id)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.id,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'" />\n  </video>\n</div>\n'}),this.JST["watch/library/media/youtube/templates/player"]}.call(this),function(win){var $playerContainer,$playerTarget,site_namespace=win.__site_namespace__,namespace=site_namespace+".Media.YouTube",logger=Logger.get(namespace),YouTube=Namespace(namespace),hasFlash=function(){if(null!==navigator.plugins&&navigator.plugins.length>0)return navigator.plugins["Shockwave Flash"]&&!0;if(~navigator.userAgent.toLowerCase().indexOf("webtv"))return!0;if(~navigator.appVersion.indexOf("MSIE")&&!~navigator.userAgent.indexOf("Opera"))try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&!0}catch(e){}return!1}(),$win=$(win),getElementDimensions=function($el){var width=$el.width(),height=Math.floor(width*(9/16));return{width:width,height:height}},resizeElement=function($el){var dimensions=getElementDimensions($playerTarget.parent());$el.width(dimensions.width+"px"),$el.height(dimensions.height+"px")},resizePlayer=function(){resizeElement($playerTarget),resizeElement($playerContainer)},createPlayer=function($el,videoId,index){$playerTarget=$el,$playerTarget.css({position:"relative"});var attributes="";attributes+=" controls",attributes+=" autoplay",attributes+=' preload="auto"';var options={plugins:["youtube"],success:function(){logger.info("Initilization Success")},error:function(msg){logger.error("Initilization Error",msg)}};if(hasFlash===!0){var dimensions=getElementDimensions($playerTarget);attributes+=" width="+dimensions.width,attributes+=" height="+dimensions.height,attributes+=' style="width:100%; height:100%;"'}else options.defaultVideoWidth="100%",options.defaultVideoHeight="100%";var template=JST["watch/library/media/youtube/templates/player"],html=template({id:videoId,attributes:attributes});$playerTarget.html(html).ready(function(){$playerContainer=$playerTarget.find(".video-player-container").css({top:0,left:0,"z-index":index,position:"absolute"}),resizePlayer(),$win.on("resize",function(){resizePlayer()}),$win.on("orientationchange",function(){resizePlayer()}),$("video").mediaelementplayer(options)})},removePlayer=function(){$playerTarget.html("")};YouTube.createPlayer=createPlayer,YouTube.removePlayer=removePlayer}(window),function(){Backbone.Marionette.Renderer.render=function(template,data){return template(data)}}(window),function(win){Namespace(win.__site_namespace__,{App:new Backbone.Marionette.Application})}(window),function(win){var site_namespace=win.__site_namespace__,Models=(Namespace(site_namespace+".Main"),Namespace(site_namespace+".App"),Namespace(site_namespace+".Models")),Model=Backbone.Model.extend({initialize:function(){var selectable=new Backbone.Picky.Selectable(this);_.extend(this,selectable)}}),Collection=Backbone.Collection.extend({comparator:function(model){var index=this.indexOf(model);return model.set("index",index),model.set("episode_id",(index+1).toString()),model},initialize:function(){var singleSelect=new Backbone.Picky.SingleSelect(this);_.extend(this,singleSelect)},model:Model});Models.videoCollection=new Collection}(window),function(){return this.JST||(this.JST={}),this.JST["watch/project/modules/video-selector/templates/item"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div \n  data-index="',(stack1=helpers.index)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.index,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'"\n  data-video-id="',(stack1=helpers.video_id)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.video_id,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'"\n  data-episode-id="',(stack1=helpers.episode_id)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.episode_id,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'"\n  class="selector content cursor-pointer" \n  >\n  <h3>',(stack1=helpers.title)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.title,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+"</h3>\n  <h5>",(stack1=helpers.description)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.description,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+"</h5>\n</div>\n"}),this.JST["watch/project/modules/video-selector/templates/item"]}.call(this),function(win){var site_namespace=win.__site_namespace__,namespace=site_namespace+".Modules.VideoSelector",logger=Logger.get(namespace),App=(Namespace(namespace),Namespace(site_namespace+".App")),Models=Namespace(site_namespace+".Models"),Routers=Namespace(site_namespace+".Routers");App.addRegions({videoSelector:".module-video-selector .flexslider"}),(new Backbone.Marionette.Controller).listenTo(Models.videoCollection,"selected",function(model){createSlider(model),this.close(),(new Backbone.Marionette.Controller).listenTo(Models.videoCollection,"selected",function(model){updateSlider(model)})});var createSlider=function(model){var index=model.get("index")+1,$el=App.videoSelector.$el;$el.flexslider({startAt:index,animation:"slide",animationLoop:!0,controlNav:!1,smoothHeight:!1,after:function(){}})},updateSlider=function(model){var index=model.get("index")+1,$el=App.videoSelector.$el;$el.flexslider(index)},SelectorItemView=Backbone.Marionette.ItemView.extend({template:JST["watch/project/modules/video-selector/templates/item"],tagName:"li",events:{},initialize:function(){this.listenTo(this.model,"selected",function(){this.$el.addClass("selected")}),this.listenTo(this.model,"deselected",function(){this.$el.removeClass("selected")})}});App.addInitializer(function(){logger.info("Init");var collectionView=new Backbone.Marionette.CollectionView({itemView:SelectorItemView,collection:Models.videoCollection,tagName:"ul",className:"slides",events:{"click .selector":function(event){var episodeId=$(event.currentTarget).data("episode-id");Routers.video.controller.navigateToEpisode(episodeId)}}});App.videoSelector.show(collectionView)})}(window),function(win,$){var site_namespace=win.__site_namespace__,namespace=site_namespace+".Modules.VideoPlayer",Models=(Logger.get(namespace),Namespace(site_namespace+".App"),Namespace(site_namespace+".Models")),YouTube=Namespace(site_namespace+".Media.YouTube"),$videoPlayerTarget=$(".video-player-target");Models.videoCollection.on("selected",function(model){YouTube.createPlayer($videoPlayerTarget,model.get("video_id"))})}(window,jQuery),function(){return this.JST||(this.JST={}),this.JST["watch/project/modules/video-grid/templates/item"]=Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,stack2,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div\n  data-index="',(stack1=helpers.index)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.index,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'"\n  data-video-id="',(stack1=helpers.video_id)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.video_id,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'"\n  data-episode-id="',(stack1=helpers.episode_id)?stack1=stack1.call(depth0,{hash:{},data:data}):(stack1=depth0&&depth0.episode_id,stack1=typeof stack1===functionType?stack1.call(depth0,{hash:{},data:data}):stack1),buffer+=escapeExpression(stack1)+'"\n  class="selector cursor-pointer"\n  >\n  <img src="'+escapeExpression((stack1=depth0&&depth0.thumbnails,stack1=null==stack1||stack1===!1?stack1:stack1["default"],stack1=null==stack1||stack1===!1?stack1:stack1.url,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" alt="',(stack2=helpers.title)?stack2=stack2.call(depth0,{hash:{},data:data}):(stack2=depth0&&depth0.title,stack2=typeof stack2===functionType?stack2.call(depth0,{hash:{},data:data}):stack2),buffer+=escapeExpression(stack2)+'"/>\n</div>\n'}),this.JST["watch/project/modules/video-grid/templates/item"]}.call(this),function(win){var site_namespace=win.__site_namespace__,namespace=site_namespace+".Modules.VideoGrid",logger=Logger.get(namespace),App=(Namespace(namespace),Namespace(site_namespace+".App")),Models=Namespace(site_namespace+".Models"),Routers=Namespace(site_namespace+".Routers");App.addRegions({videoGrid:".module-video-grid"});var collectionView,$slider;(new Backbone.Marionette.Controller).listenTo(Models.videoCollection,"selected",function(model){createSlider(model,4),this.close(),(new Backbone.Marionette.Controller).listenTo(Models.videoCollection,"selected",function(model){updateSlider(model,4)})});var updateSlider=function(model,itemsPerPage){logger.info("Update Slider");var pageIndex=Math.floor(model.get("index")/itemsPerPage);$slider.goToSlide(pageIndex)},createSlider=function(model,itemsPerPage){logger.info("Create Slider");var pageIndex=Math.floor(model.get("index")/itemsPerPage);$slider=App.videoGrid.$el.find(".bxslider"),$slider.bxSlider({pager:!1,minSlides:itemsPerPage,maxSlides:itemsPerPage,moveSlides:itemsPerPage,startSlide:pageIndex,slideMargin:10,slideWidth:300,adaptiveHeight:!0,onSliderLoad:function(){logger.info("Slider Ready")}})},SelectorItemView=Backbone.Marionette.ItemView.extend({template:JST["watch/project/modules/video-grid/templates/item"],tagName:"li",events:{},initialize:function(){this.listenTo(this.model,"selected",function(model){var index=model.get("index");App.videoGrid.$el.find("li [data-index="+index+"]").addClass("selected")}),this.listenTo(this.model,"deselected",function(model){var index=model.get("index");App.videoGrid.$el.find("li [data-index="+index+"]").removeClass("selected")})}});App.addInitializer(function(){logger.info("Init"),collectionView=new Backbone.Marionette.CollectionView({itemView:SelectorItemView,collection:Models.videoCollection,tagName:"ul",className:"bxslider",events:{"click .selector":function(event){var episodeId=$(event.currentTarget).data("episode-id");Routers.video.controller.navigateToEpisode(episodeId)}}}),App.videoGrid.show(collectionView)})}(window);