language: ruby
rvm:
  - 2.0.0-p247
before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq advancecomp gifsicle jhead jpegoptim libjpeg-progs optipng pngcrush
  - wget http://static.jonof.id.au/dl/kenutils/pngout-20130221-linux.tar.gz
  - tar -xzf pngout-*-linux.tar.gz
  - mv pngout-*-linux pngout-linux
env:
  - PATH=pngout-linux/x86_64:$PATH
install: bundle install
before_script:
  - npm install -g bower
  - bower install
script: middleman build

# whitelist
branches:
  only:
    - master
    - develop